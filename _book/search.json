[
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html",
    "href": "chapters/ch06-ggplot2_advanced.html",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "",
    "text": "6.1 Learning Objectives\nBy the end of this chapter, you will be able to:",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#learning-objectives",
    "href": "chapters/ch06-ggplot2_advanced.html#learning-objectives",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "",
    "text": "Create small multiples using facet_wrap() and facet_grid()\nAdd statistical layers: trend lines, summaries, and error bars\nCustomize themes extensively with theme() for publication-ready plots\nApply advanced color palettes (ColorBrewer, Viridis) effectively\nAdd text annotations and labels to plots\nCombine multiple plots into complex figures using patchwork and cowplot\nPolish figures to meet journal publication standards",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#introduction",
    "href": "chapters/ch06-ggplot2_advanced.html#introduction",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.2 Introduction",
    "text": "6.2 Introduction\nIn Chapter 5, you learned the fundamentals of ggplot2: creating basic plots, mapping aesthetics, applying themes, and saving your work. This chapter builds on that foundation to teach advanced techniques for creating publication-quality, multi-panel figures.\n\n6.2.1 What You’ll Learn\nThis chapter focuses on techniques you’ll use when: - Creating figures for journal submissions - Making complex multi-panel layouts - Adding statistical summaries and trend lines - Customizing every aspect of plot appearance - Comparing patterns across multiple groups simultaneously\n\n\n\n\n\n\nNotePrerequisites\n\n\n\nThis chapter assumes you’ve completed Chapter 5 and are comfortable with: - Basic ggplot2 syntax (data + aes() + geom_*()) - Common geoms (point, line, bar, boxplot, etc.) - Aesthetic mappings (color, fill, size, etc.) - Built-in themes\n\n\n\n\n6.2.2 Setup\n\nlibrary(tidyverse)  # Includes ggplot2, dplyr\nlibrary(patchwork)  # Combining plots\nlibrary(cowplot)    # Alternative for combining plots\n\n# Optional: install.packages(\"ggrepel\") for non-overlapping labels\n\n# Set default theme for all plots\ntheme_set(theme_minimal())\n\n\n\n6.2.3 Load Example Data\nWe’ll use cattle weight data throughout this chapter:\n\n# Read cattle data\ncattle &lt;- read_csv(\"../data/raw/cattle_weights.csv\")\n\n# Calculate weight gain\ncattle &lt;- cattle %&gt;%\n  mutate(\n    weight_gain_kg = final_weight_kg - initial_weight_kg,\n    days_on_feed = as.numeric(as.Date(\"2023-12-01\") - as.Date(birth_date))\n  )\n\n# View data\nglimpse(cattle)\n\nRows: 20\nColumns: 9\n$ animal_id         &lt;chr&gt; \"C001\", \"C002\", \"C003\", \"C004\", \"C005\", \"C006\", \"C00…\n$ birth_date        &lt;date&gt; 2023-03-15, 2023-03-18, 2023-03-20, 2023-03-22, 202…\n$ breed             &lt;chr&gt; \"Angus\", \"Hereford\", \"Angus\", \"Charolais\", \"Angus\", …\n$ sex               &lt;chr&gt; \"M\", \"F\", \"M\", \"F\", \"M\", \"F\", \"M\", \"F\", \"M\", \"F\", \"M…\n$ initial_weight_kg &lt;dbl&gt; 285, 270, 290, 295, 280, 275, 285, 300, 278, 272, 30…\n$ final_weight_kg   &lt;dbl&gt; 520, 485, 535, 510, 500, 495, 525, 540, 490, 480, 55…\n$ treatment         &lt;chr&gt; \"High_Protein\", \"Standard\", \"High_Protein\", \"Control…\n$ weight_gain_kg    &lt;dbl&gt; 235, 215, 245, 215, 220, 220, 240, 240, 212, 208, 25…\n$ days_on_feed      &lt;dbl&gt; 261, 258, 256, 254, 251, 244, 240, 237, 233, 230, 22…",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#faceting-creating-small-multiples",
    "href": "chapters/ch06-ggplot2_advanced.html#faceting-creating-small-multiples",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.3 Faceting: Creating Small Multiples",
    "text": "6.3 Faceting: Creating Small Multiples\nFaceting splits your data into subsets and creates a separate plot for each subset. This is powerful for comparing patterns across groups.\n\n6.3.1 Why Use Facets?\nInstead of putting everything on one plot with different colors:\n\n# All breeds on one plot (can be cluttered)\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 3) +\n  labs(title = \"All breeds together (can be hard to read)\")\n\n\n\n\n\n\n\n\nUse facets to give each group its own panel:\n\n# Each breed gets its own panel (clearer)\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3, color = \"steelblue\") +\n  facet_wrap(~breed) +\n  labs(title = \"Faceted by breed (clearer patterns)\")\n\n\n\n\n\n\n\n\n\n\n6.3.2 facet_wrap(): Faceting by One Variable\nfacet_wrap() creates a series of panels arranged in rows and columns.\nBasic syntax:\nfacet_wrap(~variable)\n\n6.3.2.1 Example: Facet by Breed\n\nggplot(cattle, aes(x = initial_weight_kg, y = final_weight_kg)) +\n  geom_point(aes(color = sex), size = 3) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"black\") +\n  facet_wrap(~breed) +\n  labs(\n    title = \"Initial vs Final Weight by Breed\",\n    x = \"Initial Weight (kg)\",\n    y = \"Final Weight (kg)\"\n  )\n\n\n\n\n\n\n\n\n\n\n6.3.2.2 Controlling Layout\n\n# Specify number of rows or columns\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3, alpha = 0.6) +\n  facet_wrap(~breed, nrow = 1) +  # Force 1 row (3 columns)\n  labs(title = \"Single row layout\")\n\n\n\n\n\n\n\n# Or specify columns\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3, alpha = 0.6) +\n  facet_wrap(~breed, ncol = 1) +  # Force 1 column (3 rows)\n  labs(title = \"Single column layout\")\n\n\n\n\n\n\n\n\n\n\n6.3.2.3 Free vs Fixed Scales\nBy default, all facets share the same x and y scales. You can make them independent:\n\n# Fixed scales (default - easier to compare)\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3) +\n  facet_wrap(~breed, scales = \"fixed\") +\n  labs(title = \"Fixed scales (default)\")\n\n\n\n\n\n\n\n# Free scales (each panel optimized)\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3) +\n  facet_wrap(~breed, scales = \"free\") +\n  labs(title = \"Free scales\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWarningBe Careful with Free Scales!\n\n\n\nFree scales can be misleading because viewers may not notice the different axis ranges. Use them only when: - Groups have very different ranges - You’re more interested in patterns within each group than comparisons between groups - You clearly communicate that scales differ\n\n\n\n\n6.3.2.4 Options for Free Scales\nscales = \"fixed\"    # Both x and y fixed (default)\nscales = \"free\"     # Both x and y free\nscales = \"free_x\"   # Only x-axis free\nscales = \"free_y\"   # Only y-axis free\n\n\n6.3.2.5 Customizing Facet Labels\n\n# Create cleaner labels\ncattle_labeled &lt;- cattle %&gt;%\n  mutate(\n    breed_label = case_when(\n      breed == \"Angus\" ~ \"Angus Cattle\",\n      breed == \"Hereford\" ~ \"Hereford Cattle\",\n      breed == \"Charolais\" ~ \"Charolais Cattle\"\n    )\n  )\n\nggplot(cattle_labeled, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3, alpha = 0.6) +\n  facet_wrap(~breed_label) +\n  labs(title = \"Custom facet labels\")\n\n\n\n\n\n\n\n\n\n\n\n6.3.3 facet_grid(): Faceting by Two Variables\nfacet_grid() creates a grid of panels based on two variables (one for rows, one for columns).\nBasic syntax:\nfacet_grid(rows ~ columns)\nfacet_grid(var1 ~ var2)\n\n6.3.3.1 Example: Breed × Sex\n\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3, alpha = 0.6) +\n  facet_grid(sex ~ breed) +\n  labs(\n    title = \"Weight Gain by Breed and Sex\",\n    subtitle = \"Rows = Sex, Columns = Breed\"\n  )\n\n\n\n\n\n\n\n\n\n\n6.3.3.2 Just Rows or Just Columns\n\n# Facet only by rows (use . for columns)\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3, alpha = 0.6) +\n  facet_grid(breed ~ .) +\n  labs(title = \"Breed in rows\")\n\n\n\n\n\n\n\n# Facet only by columns (use . for rows)\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3, alpha = 0.6) +\n  facet_grid(. ~ breed) +\n  labs(title = \"Breed in columns\")\n\n\n\n\n\n\n\n\n\n\n\n6.3.4 facet_wrap() vs facet_grid()\n\n\n\n\n\n\n\n\nFeature\nfacet_wrap()\nfacet_grid()\n\n\n\n\nVariables\n1 (usually)\n2 (rows × columns)\n\n\nLayout\nFlows into rows/columns\nStrict grid\n\n\nBest for\nMany levels of one variable\nCross-classifying two variables\n\n\nSpace\nMore efficient with space\nCan have empty cells\n\n\n\n\n\n\n\n\n\nTipWhen to Use Each\n\n\n\n\nfacet_wrap(): When you have one grouping variable with many levels (e.g., 10 different farms)\nfacet_grid(): When you want to compare combinations of two variables (e.g., treatment × time point)\n\n\n\n\n\n6.3.5 Faceting with Three Variables\nYou can facet by multiple variables with facet_wrap() using vars():\n\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 2, alpha = 0.6) +\n  facet_wrap(vars(breed, sex)) +\n  labs(title = \"Faceting by breed AND sex with facet_wrap()\")\n\n\n\n\n\n\n\n\nOr nest faceting:\n\n# Facet by treatment, then color by sex\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = sex)) +\n  geom_point(size = 3) +\n  facet_wrap(~treatment) +\n  labs(title = \"Treatment (facets) × Sex (color)\")",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#statistical-layers",
    "href": "chapters/ch06-ggplot2_advanced.html#statistical-layers",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.4 Statistical Layers",
    "text": "6.4 Statistical Layers\nStatistical layers add computed values to your plots: trend lines, means, error bars, etc.\n\n6.4.1 Adding Trend Lines with geom_smooth()\ngeom_smooth() adds a smoothed conditional mean to your plot.\n\n6.4.1.1 Linear Regression Line\n\nggplot(cattle, aes(x = initial_weight_kg, y = final_weight_kg)) +\n  geom_point(size = 3, alpha = 0.6) +\n  geom_smooth(method = \"lm\", se = TRUE, color = \"blue\") +\n  labs(\n    title = \"Linear Trend with Confidence Interval\",\n    x = \"Initial Weight (kg)\",\n    y = \"Final Weight (kg)\"\n  )\n\n\n\n\n\n\n\n\nArguments: - method = \"lm\" — Linear regression - se = TRUE — Show 95% confidence interval (default) - se = FALSE — Hide confidence interval\n\n\n6.4.1.2 By Group\n\n# Separate trend line for each breed\nggplot(cattle, aes(x = initial_weight_kg, y = final_weight_kg, color = breed)) +\n  geom_point(size = 3, alpha = 0.6) +\n  geom_smooth(method = \"lm\", se = TRUE) +\n  labs(title = \"Linear trends by breed\")\n\n\n\n\n\n\n\n\n\n\n6.4.1.3 LOESS Smoothing\nLOESS (Locally Estimated Scatterplot Smoothing) is better for non-linear patterns:\n\n# Create data with non-linear relationship\nset.seed(123)\ngrowth_curve &lt;- tibble(\n  age_days = rep(1:100, times = 3),\n  weight = 50 + age_days * 0.5 + 0.01 * age_days^2 + rnorm(300, sd = 10),\n  animal = rep(c(\"A\", \"B\", \"C\"), each = 100)\n)\n\nggplot(growth_curve, aes(x = age_days, y = weight)) +\n  geom_point(alpha = 0.3) +\n  geom_smooth(method = \"loess\", color = \"red\", se = TRUE) +\n  geom_smooth(method = \"lm\", color = \"blue\", linetype = \"dashed\", se = FALSE) +\n  labs(\n    title = \"LOESS (red) vs Linear (blue)\",\n    subtitle = \"LOESS captures non-linear growth pattern\"\n  )\n\n\n\n\n\n\n\n\n\n\n6.4.1.4 GAM (Generalized Additive Model)\nFor very flexible smoothing:\n\nggplot(growth_curve, aes(x = age_days, y = weight)) +\n  geom_point(alpha = 0.3) +\n  geom_smooth(method = \"gam\", formula = y ~ s(x, bs = \"cs\"), color = \"darkgreen\") +\n  labs(title = \"GAM smoothing for flexible curves\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNoteMethod Options for geom_smooth()\n\n\n\n\nmethod = \"lm\" — Linear regression\nmethod = \"loess\" — LOESS smoothing (default for &lt; 1000 points)\nmethod = \"gam\" — Generalized Additive Model (requires mgcv package)\nmethod = \"glm\" — Generalized Linear Model\n\n\n\n\n\n\n6.4.2 Summary Statistics with stat_summary()\nstat_summary() calculates and displays summary statistics.\n\n6.4.2.1 Mean with Error Bars\n\n# Mean weight gain by breed\nggplot(cattle, aes(x = breed, y = weight_gain_kg)) +\n  geom_jitter(width = 0.2, alpha = 0.3, size = 2) +\n  stat_summary(\n    fun = mean,\n    geom = \"point\",\n    size = 4,\n    color = \"red\"\n  ) +\n  stat_summary(\n    fun.data = mean_se,\n    geom = \"errorbar\",\n    width = 0.2,\n    color = \"red\"\n  ) +\n  labs(title = \"Mean ± SE by breed\")\n\n\n\n\n\n\n\n\n\n\n6.4.2.2 Mean with Confidence Intervals\n\nggplot(cattle, aes(x = treatment, y = weight_gain_kg, color = treatment)) +\n  stat_summary(\n    fun.data = mean_cl_normal,  # Mean with 95% CI\n    geom = \"pointrange\",\n    size = 1\n  ) +\n  labs(\n    title = \"Mean Weight Gain by Treatment\",\n    subtitle = \"Points show mean, bars show 95% CI\",\n    y = \"Weight Gain (kg)\"\n  ) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTipSummary Functions\n\n\n\nCommon functions for stat_summary(): - mean, median, min, max - mean_se — Mean ± standard error - mean_sdl — Mean ± standard deviation - mean_cl_normal — Mean ± 95% CI (assumes normality) - mean_cl_boot — Mean ± 95% CI (bootstrap)\n\n\n\n\n\n6.4.3 Manual Error Bars\nIf you’ve pre-calculated summaries, use geom_errorbar():\n\n# Calculate summaries\ncattle_summary &lt;- cattle %&gt;%\n  group_by(breed, treatment) %&gt;%\n  summarise(\n    mean_gain = mean(weight_gain_kg),\n    se_gain = sd(weight_gain_kg) / sqrt(n()),\n    .groups = \"drop\"\n  )\n\ncattle_summary\n\n# A tibble: 9 × 4\n  breed     treatment    mean_gain se_gain\n  &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;\n1 Angus     Control           224    16   \n2 Angus     High_Protein      234.    8.63\n3 Angus     Standard          220.    7.22\n4 Charolais Control           215    NA   \n5 Charolais High_Protein      241.    5.21\n6 Charolais Standard          243    NA   \n7 Hereford  Control           218.    3.93\n8 Hereford  High_Protein      220    NA   \n9 Hereford  Standard          214.    1.5 \n\n# Plot with error bars\nggplot(cattle_summary, aes(x = breed, y = mean_gain, fill = treatment)) +\n  geom_col(position = \"dodge\") +\n  geom_errorbar(\n    aes(ymin = mean_gain - se_gain, ymax = mean_gain + se_gain),\n    position = position_dodge(width = 0.9),\n    width = 0.25\n  ) +\n  labs(\n    title = \"Mean Weight Gain ± SE\",\n    y = \"Mean Weight Gain (kg)\"\n  )\n\n\n\n\n\n\n\n\n\n\n6.4.4 Other Error Bar Geoms\n\n# geom_linerange (no caps)\np1 &lt;- ggplot(cattle_summary, aes(x = breed, y = mean_gain, color = treatment)) +\n  geom_point(size = 3, position = position_dodge(width = 0.5)) +\n  geom_linerange(\n    aes(ymin = mean_gain - se_gain, ymax = mean_gain + se_gain),\n    position = position_dodge(width = 0.5)\n  ) +\n  labs(title = \"geom_linerange\")\n\n# geom_pointrange (combines point and range)\np2 &lt;- ggplot(cattle_summary, aes(x = breed, y = mean_gain, color = treatment)) +\n  geom_pointrange(\n    aes(ymin = mean_gain - se_gain, ymax = mean_gain + se_gain),\n    position = position_dodge(width = 0.5)\n  ) +\n  labs(title = \"geom_pointrange\")\n\np1 + p2",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#advanced-theme-customization",
    "href": "chapters/ch06-ggplot2_advanced.html#advanced-theme-customization",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.5 Advanced Theme Customization",
    "text": "6.5 Advanced Theme Customization\nIn Chapter 5, you learned about built-in themes (theme_minimal(), theme_classic(), etc.). Now we’ll use theme() to customize every aspect of plot appearance.\n\n6.5.1 The theme() Function\ntheme() controls non-data elements: text, backgrounds, grid lines, legends, etc.\n\n6.5.1.1 Basic Structure\ntheme(\n  element = element_function(arguments)\n)\nElement functions: - element_text() — Text properties - element_line() — Line properties - element_rect() — Rectangle (background) properties - element_blank() — Remove element entirely\n\n\n\n6.5.2 Customizing Text Elements\n\nggplot(cattle, aes(x = breed, y = weight_gain_kg, fill = breed)) +\n  geom_boxplot() +\n  labs(title = \"Weight Gain by Breed\", x = \"Breed\", y = \"Weight Gain (kg)\") +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 18, face = \"bold\", hjust = 0.5),\n    axis.title = element_text(size = 14, face = \"bold\"),\n    axis.text = element_text(size = 12),\n    legend.title = element_text(size = 12, face = \"bold\"),\n    legend.text = element_text(size = 10)\n  )\n\n\n\n\n\n\n\n\nText arguments: - size — Font size in points - face — “plain”, “bold”, “italic”, “bold.italic” - hjust — Horizontal justification (0 = left, 0.5 = center, 1 = right) - vjust — Vertical justification - color — Text color - family — Font family\n\n\n6.5.3 Customizing Legends\n\n# Legend position\np1 &lt;- ggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 3) +\n  labs(title = \"Legend on right (default)\") +\n  theme_minimal()\n\np2 &lt;- ggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 3) +\n  labs(title = \"Legend on bottom\") +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n\np3 &lt;- ggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 3) +\n  labs(title = \"Legend inside plot\") +\n  theme_minimal() +\n  theme(legend.position = c(0.85, 0.2))  # x, y coordinates (0-1)\n\np4 &lt;- ggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 3) +\n  labs(title = \"No legend\") +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n\n(p1 + p2) / (p3 + p4)\n\n\n\n\n\n\n\n\n\n6.5.3.1 Legend Box and Background\n\nggplot(cattle, aes(x = breed, y = weight_gain_kg, fill = sex)) +\n  geom_boxplot() +\n  theme_minimal() +\n  theme(\n    legend.position = c(0.9, 0.8),\n    legend.background = element_rect(fill = \"white\", color = \"black\", linewidth = 0.5),\n    legend.title = element_text(face = \"bold\"),\n    legend.key.size = unit(1, \"cm\")\n  )\n\n\n\n\n\n\n\n\n\n\n\n6.5.4 Panel Elements\n\nggplot(cattle, aes(x = breed, y = weight_gain_kg)) +\n  geom_boxplot(fill = \"lightblue\") +\n  theme_minimal() +\n  theme(\n    panel.background = element_rect(fill = \"lightyellow\"),\n    panel.grid.major = element_line(color = \"gray70\", linewidth = 0.5),\n    panel.grid.minor = element_line(color = \"gray90\", linewidth = 0.25),\n    panel.border = element_rect(fill = NA, color = \"black\", linewidth = 1)\n  ) +\n  labs(title = \"Custom panel appearance\")\n\n\n\n\n\n\n\n\n\n\n6.5.5 Plot Background and Margins\n\nggplot(cattle, aes(x = breed, y = weight_gain_kg, fill = breed)) +\n  geom_violin(alpha = 0.7) +\n  theme_minimal() +\n  theme(\n    plot.background = element_rect(fill = \"#f0f0f0\"),\n    plot.margin = margin(t = 20, r = 30, b = 20, l = 20, unit = \"pt\"),\n    plot.title = element_text(hjust = 0.5, size = 16, face = \"bold\")\n  ) +\n  labs(title = \"Custom plot background and margins\")\n\n\n\n\n\n\n\n\n\n\n6.5.6 Axis Customization\n\nggplot(cattle, aes(x = initial_weight_kg, y = final_weight_kg)) +\n  geom_point(size = 3, alpha = 0.6) +\n  theme_minimal() +\n  theme(\n    axis.line = element_line(color = \"black\", linewidth = 1),\n    axis.ticks = element_line(color = \"black\", linewidth = 0.5),\n    axis.ticks.length = unit(0.25, \"cm\"),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    panel.grid.major = element_blank(),\n    panel.grid.minor = element_blank()\n  ) +\n  labs(title = \"Custom axis styling\")\n\n\n\n\n\n\n\n\n\n\n6.5.7 Creating a Custom Theme\nSave your customizations as a reusable theme:\n\ntheme_publication &lt;- function(base_size = 12) {\n  theme_minimal(base_size = base_size) +\n    theme(\n      # Text elements\n      plot.title = element_text(size = base_size + 4, face = \"bold\", hjust = 0.5),\n      plot.subtitle = element_text(size = base_size + 2, hjust = 0.5),\n      axis.title = element_text(size = base_size + 2, face = \"bold\"),\n      axis.text = element_text(size = base_size),\n\n      # Legend\n      legend.position = \"bottom\",\n      legend.title = element_text(face = \"bold\"),\n\n      # Panel\n      panel.grid.minor = element_blank(),\n      panel.border = element_rect(fill = NA, color = \"black\", linewidth = 0.5),\n\n      # Background\n      plot.background = element_rect(fill = \"white\", color = NA)\n    )\n}\n\n# Use custom theme\nggplot(cattle, aes(x = breed, y = weight_gain_kg, fill = treatment)) +\n  geom_boxplot() +\n  labs(\n    title = \"Weight Gain by Breed and Treatment\",\n    subtitle = \"Using custom publication theme\",\n    y = \"Weight Gain (kg)\"\n  ) +\n  theme_publication()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTipSave Your Theme\n\n\n\nSave custom themes in your R scripts or packages:\n# In your setup chunk\ntheme_publication &lt;- function(...) { ... }\ntheme_set(theme_publication())  # Set as default for all plots",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#advanced-color-palettes",
    "href": "chapters/ch06-ggplot2_advanced.html#advanced-color-palettes",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.6 Advanced Color Palettes",
    "text": "6.6 Advanced Color Palettes\nChapter 5 covered basic color scales. Now we’ll explore professional color palettes.\n\n6.6.1 ColorBrewer Palettes\nColorBrewer provides carefully designed color schemes for different data types.\n\n6.6.1.1 Qualitative Palettes (Categorical Data)\n\nlibrary(RColorBrewer)\n\n# Display available ColorBrewer palettes\ndisplay.brewer.all()\n\n\n\n\n\n\n\n# Use Set1 palette\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 4) +\n  scale_color_brewer(palette = \"Set1\") +\n  labs(title = \"ColorBrewer Set1\")\n\n\n\n\n\n\n\n# Use Dark2 palette\nggplot(cattle, aes(x = breed, y = weight_gain_kg, fill = breed)) +\n  geom_violin() +\n  scale_fill_brewer(palette = \"Dark2\") +\n  theme(legend.position = \"none\") +\n  labs(title = \"ColorBrewer Dark2\")\n\n\n\n\n\n\n\n\n\n\n6.6.1.2 Sequential Palettes (Ordered Data)\n\n# Create ordered variable\ncattle &lt;- cattle %&gt;%\n  mutate(weight_category = cut(final_weight_kg,\n                                 breaks = c(0, 490, 510, 600),\n                                 labels = c(\"Light\", \"Medium\", \"Heavy\")))\n\nggplot(cattle, aes(x = breed, fill = weight_category)) +\n  geom_bar(position = \"fill\") +\n  scale_fill_brewer(palette = \"Blues\", direction = 1) +\n  labs(\n    title = \"Weight Categories by Breed\",\n    y = \"Proportion\",\n    fill = \"Weight Category\"\n  )\n\n\n\n\n\n\n\n\n\n\n6.6.1.3 Diverging Palettes\nGood for data with a meaningful midpoint:\n\n# Calculate deviation from mean\ncattle &lt;- cattle %&gt;%\n  mutate(gain_deviation = weight_gain_kg - mean(weight_gain_kg))\n\nggplot(cattle, aes(x = animal_id, y = 1, fill = gain_deviation)) +\n  geom_tile() +\n  scale_fill_distiller(palette = \"RdBu\", direction = -1) +\n  theme_void() +\n  theme(\n    legend.position = \"bottom\",\n    axis.text.x = element_text(angle = 90, hjust = 1)\n  ) +\n  labs(\n    title = \"Deviation from Mean Weight Gain\",\n    fill = \"Deviation (kg)\"\n  )\n\n\n\n\n\n\n\n\n\n\n\n6.6.2 Viridis Palettes (Colorblind-Friendly)\nViridis palettes are: - Colorblind-friendly - Perceptually uniform - Print well in grayscale\n\n# Discrete version\np1 &lt;- ggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 4) +\n  scale_color_viridis_d(option = \"viridis\") +\n  labs(title = \"Viridis (discrete)\")\n\np2 &lt;- ggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 4) +\n  scale_color_viridis_d(option = \"plasma\") +\n  labs(title = \"Plasma\")\n\np3 &lt;- ggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 4) +\n  scale_color_viridis_d(option = \"inferno\") +\n  labs(title = \"Inferno\")\n\np4 &lt;- ggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 4) +\n  scale_color_viridis_d(option = \"magma\") +\n  labs(title = \"Magma\")\n\n(p1 + p2) / (p3 + p4)\n\n\n\n\n\n\n\n\n\n6.6.2.1 Continuous Viridis\n\nggplot(cattle, aes(x = breed, y = sex, fill = weight_gain_kg)) +\n  geom_tile(color = \"white\", linewidth = 1) +\n  scale_fill_viridis_c(option = \"plasma\") +\n  labs(\n    title = \"Weight Gain Heatmap\",\n    fill = \"Weight Gain (kg)\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nImportantAlways Consider Colorblindness\n\n\n\nApproximately 8% of men and 0.5% of women have some form of color blindness. Use: - Viridis palettes - ColorBrewer palettes designed for colorblindness - Sufficient contrast - Shape or pattern in addition to color when possible\n\n\n\n\n\n6.6.3 Manual Color Specification\nFor precise control, specify colors manually:\n\n# Define custom colors\nbreed_colors &lt;- c(\n  \"Angus\" = \"#8B4513\",      # Brown\n  \"Hereford\" = \"#CD853F\",   # Tan\n  \"Charolais\" = \"#F5DEB3\"   # Wheat\n)\n\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 4) +\n  scale_color_manual(values = breed_colors) +\n  labs(title = \"Custom brand colors\")",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#text-and-annotations",
    "href": "chapters/ch06-ggplot2_advanced.html#text-and-annotations",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.7 Text and Annotations",
    "text": "6.7 Text and Annotations\nAdding text and annotations helps highlight important features in your plots.\n\n6.7.1 geom_text() and geom_label()\nAdd text for each data point:\n\n# Select a few animals to label\nlabeled_cattle &lt;- cattle %&gt;%\n  filter(animal_id %in% c(\"C001\", \"C011\", \"C020\"))\n\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3, alpha = 0.5) +\n  geom_point(data = labeled_cattle, size = 4, color = \"red\") +\n  geom_text(data = labeled_cattle, aes(label = animal_id),\n            nudge_x = 5, nudge_y = 5, size = 4) +\n  labs(title = \"geom_text() - labels without boxes\")\n\n\n\n\n\n\n\n# With boxes (geom_label)\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg)) +\n  geom_point(size = 3, alpha = 0.5) +\n  geom_point(data = labeled_cattle, size = 4, color = \"red\") +\n  geom_label(data = labeled_cattle, aes(label = animal_id),\n             nudge_x = 5, nudge_y = 5, size = 4) +\n  labs(title = \"geom_label() - labels with boxes\")\n\n\n\n\n\n\n\n\n\n\n6.7.2 Non-Overlapping Labels with ggrepel\nggrepel automatically adjusts label positions to avoid overlaps:\n\n# First install: install.packages(\"ggrepel\")\nlibrary(ggrepel)\n\n# Label all cattle (geom_text would overlap badly)\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, label = animal_id)) +\n  geom_point(size = 3, alpha = 0.6) +\n  geom_text_repel(size = 3, max.overlaps = 10) +\n  labs(title = \"geom_text_repel() prevents overlaps\")\n\n\n\n\n\n\n\nNoteInstalling ggrepel\n\n\n\nThe ggrepel package is optional but very useful. Install it with:\ninstall.packages(\"ggrepel\")\n\n\n\n\n6.7.3 annotate() for Custom Annotations\nAdd text, shapes, or lines that aren’t tied to data:\n\nggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 3) +\n  # Add text annotation\n  annotate(\"text\", x = 305, y = 270, label = \"High performers\",\n           size = 5, fontface = \"bold\") +\n  # Add arrow\n  annotate(\"segment\", x = 303, xend = 298, y = 268, yend = 260,\n           arrow = arrow(length = unit(0.3, \"cm\")), linewidth = 1) +\n  # Add rectangle\n  annotate(\"rect\", xmin = 295, xmax = 308, ymin = 255, ymax = 275,\n           alpha = 0.2, fill = \"yellow\") +\n  labs(title = \"Using annotate() for custom elements\")\n\n\n\n\n\n\n\n\n\n\n6.7.4 Highlighting Regions\n\n# Highlight a target zone\nggplot(cattle, aes(x = initial_weight_kg, y = final_weight_kg)) +\n  # Target zone (add first so it's behind points)\n  annotate(\"rect\", xmin = 280, xmax = 295, ymin = 510, ymax = 540,\n           alpha = 0.2, fill = \"green\") +\n  annotate(\"text\", x = 287.5, y = 545, label = \"Target Range\",\n           fontface = \"bold\", size = 4) +\n  # Data points\n  geom_point(aes(color = breed), size = 3) +\n  labs(\n    title = \"Target Weight Range\",\n    x = \"Initial Weight (kg)\",\n    y = \"Final Weight (kg)\"\n  )",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#combining-plots",
    "href": "chapters/ch06-ggplot2_advanced.html#combining-plots",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.8 Combining Plots",
    "text": "6.8 Combining Plots\nCreating multi-panel figures is essential for publications. We’ll use two packages: patchwork and cowplot.\n\n6.8.1 The patchwork Package\npatchwork makes combining plots incredibly easy with intuitive operators.\n\n6.8.1.1 Basic Operators\n\n# Create individual plots\np1 &lt;- ggplot(cattle, aes(x = breed, fill = breed)) +\n  geom_bar() +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  labs(title = \"Count by Breed\", y = \"Count\")\n\np2 &lt;- ggplot(cattle, aes(x = breed, y = weight_gain_kg, fill = breed)) +\n  geom_boxplot() +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  labs(title = \"Weight Gain by Breed\", y = \"Weight Gain (kg)\")\n\np3 &lt;- ggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 3) +\n  theme_minimal() +\n  labs(title = \"Initial Weight vs Gain\")\n\n# Side by side with +\np1 + p2\n\n\n\n\n\n\n\n# Stack vertically with /\np1 / p2\n\n\n\n\n\n\n\n# Complex layouts\n(p1 + p2) / p3\n\n\n\n\n\n\n\n\n\n\n6.8.1.2 More Complex Layouts\n\np4 &lt;- ggplot(cattle, aes(x = treatment, fill = treatment)) +\n  geom_bar() +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  labs(title = \"Treatment Distribution\")\n\n# | for side-by-side (same as +)\np1 | p2 | p4\n\n\n\n\n\n\n\n# Nested layouts\n(p1 | p2) / (p3 | p4)\n\n\n\n\n\n\n\n# One plot taking more space\np1 + p2 + p3 + plot_layout(widths = c(2, 1, 1))\n\n\n\n\n\n\n\n\n\n\n6.8.1.3 Collecting Legends\n\n# All plots have their own legends (cluttered)\np1_legend &lt;- p1 + theme(legend.position = \"right\")\np2_legend &lt;- p2 + theme(legend.position = \"right\")\np3_legend &lt;- p3 + theme(legend.position = \"right\")\n\n(p1_legend + p2_legend + p3_legend)\n\n\n\n\n\n\n\n# Collect legends into one\n(p1_legend + p2_legend + p3_legend) +\n  plot_layout(guides = \"collect\") &\n  theme(legend.position = \"bottom\")\n\n\n\n\n\n\n\n\n\n\n6.8.1.4 Adding Plot Labels\n\n# Add A, B, C labels\n(p1 + p2) / p3 +\n  plot_annotation(\n    tag_levels = \"A\",\n    title = \"Cattle Weight Analysis\",\n    subtitle = \"Three perspectives on weight gain data\",\n    caption = \"Data from 20 cattle across 3 breeds\"\n  )\n\n\n\n\n\n\n\n\n\n\n6.8.1.5 Controlling Dimensions\n\n# Control relative widths and heights\n(p1 + p2) / p3 +\n  plot_layout(heights = c(1, 2))  # Bottom plot twice as tall\n\n\n\n\n\n\n\np1 + p2 + p3 +\n  plot_layout(widths = c(2, 1, 1))  # First plot twice as wide\n\n\n\n\n\n\n\n\n\n\n\n6.8.2 The cowplot Package\ncowplot provides more control over plot alignment and layouts.\n\n6.8.2.1 Basic plot_grid()\n\nlibrary(cowplot)\n\n# Simple grid\nplot_grid(p1, p2, p3, ncol = 2, labels = c(\"A\", \"B\", \"C\"))\n\n\n\n\n\n\n\n# Adjust relative sizes\nplot_grid(\n  p1, p2, p3,\n  ncol = 2,\n  rel_widths = c(1, 1.5),\n  rel_heights = c(1, 1.2),\n  labels = \"AUTO\"\n)\n\n\n\n\n\n\n\n\n\n\n6.8.2.2 Aligning Plots\n\n# Align axes\nplot_grid(p1, p2, ncol = 1, align = \"v\")\n\n\n\n\n\n\n\n# Align both axes\nplot_grid(p1, p2, p3, ncol = 3, align = \"hv\")\n\n\n\n\n\n\n\n\n\n\n6.8.2.3 Complex Layouts with Nesting\n\n# Create nested layout\ntop_row &lt;- plot_grid(p1, p2, ncol = 2, labels = c(\"A\", \"B\"))\nbottom_row &lt;- plot_grid(p3, p4, ncol = 2, labels = c(\"C\", \"D\"))\n\nplot_grid(top_row, bottom_row, ncol = 1, rel_heights = c(1, 1.2))\n\n\n\n\n\n\n\n\n\n\n\n6.8.3 patchwork vs cowplot\n\n\n\n\n\n\n\n\nFeature\npatchwork\ncowplot\n\n\n\n\nSyntax\nVery intuitive (+, /, \\|)\nFunction-based (plot_grid())\n\n\nQuick layouts\n⭐⭐⭐⭐⭐\n⭐⭐⭐\n\n\nComplex control\n⭐⭐⭐⭐\n⭐⭐⭐⭐⭐\n\n\nLearning curve\nEasy\nModerate\n\n\nLegend handling\nExcellent\nGood\n\n\n\n\n\n\n\n\n\nTipWhich Package to Use?\n\n\n\n\npatchwork: For most cases — intuitive and quick\ncowplot: When you need precise control over alignment and spacing\nBoth: They work well together! Use patchwork for layout, cowplot for fine-tuning",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#publication-ready-workflow",
    "href": "chapters/ch06-ggplot2_advanced.html#publication-ready-workflow",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.9 Publication-Ready Workflow",
    "text": "6.9 Publication-Ready Workflow\nCreating journal-quality figures requires attention to detail. Here’s a complete workflow.\n\n6.9.1 Checklist for Publication Figures\n✅ Data Quality - [ ] Data cleaned and verified - [ ] Outliers investigated - [ ] Sample sizes appropriate\n✅ Plot Choice - [ ] Plot type appropriate for data - [ ] Multiple views if needed (e.g., raw data + summary)\n✅ Visual Elements - [ ] Axis labels clear and include units - [ ] Title informative (or caption in figure legend) - [ ] Legend easy to understand - [ ] Colors colorblind-friendly - [ ] Text readable at publication size\n✅ Statistics - [ ] Error bars clearly defined (SE, SD, CI?) - [ ] Sample sizes shown or stated - [ ] Statistical tests results shown if relevant\n✅ Style - [ ] Font size: 8-12pt in final figure - [ ] Line widths: 0.5-1pt - [ ] Resolution: 300+ DPI - [ ] Format: PDF (vector) or high-res PNG\n\n\n6.9.2 Complete Example: Publication Figure\n\n# Step 1: Prepare data with summary statistics\ncattle_stats &lt;- cattle %&gt;%\n  group_by(breed, treatment) %&gt;%\n  summarise(\n    n = n(),\n    mean_gain = mean(weight_gain_kg),\n    se_gain = sd(weight_gain_kg) / sqrt(n()),\n    .groups = \"drop\"\n  )\n\n# Step 2: Create individual panels\n\n# Panel A: Raw data with trend lines\npanel_a &lt;- ggplot(cattle, aes(x = initial_weight_kg, y = weight_gain_kg, color = breed)) +\n  geom_point(size = 2, alpha = 0.6) +\n  geom_smooth(method = \"lm\", se = FALSE, linewidth = 1) +\n  scale_color_viridis_d(option = \"plasma\") +\n  labs(\n    title = \"Individual data with linear trends\",\n    x = \"Initial Weight (kg)\",\n    y = \"Weight Gain (kg)\"\n  ) +\n  theme_minimal(base_size = 10) +\n  theme(\n    plot.title = element_text(size = 10, face = \"bold\"),\n    legend.position = c(0.85, 0.2),\n    panel.border = element_rect(fill = NA, color = \"black\", linewidth = 0.5)\n  )\n\n# Panel B: Summary by breed\npanel_b &lt;- ggplot(cattle, aes(x = breed, y = weight_gain_kg, fill = breed)) +\n  geom_boxplot(alpha = 0.7, outlier.shape = NA) +\n  geom_jitter(width = 0.2, size = 1.5, alpha = 0.4) +\n  scale_fill_viridis_d(option = \"plasma\") +\n  stat_summary(fun = mean, geom = \"point\", shape = 23, size = 3, fill = \"red\") +\n  labs(\n    title = \"Distribution by breed\",\n    x = \"Breed\",\n    y = \"Weight Gain (kg)\"\n  ) +\n  theme_minimal(base_size = 10) +\n  theme(\n    plot.title = element_text(size = 10, face = \"bold\"),\n    legend.position = \"none\",\n    panel.border = element_rect(fill = NA, color = \"black\", linewidth = 0.5)\n  )\n\n# Panel C: Interaction between breed and treatment\npanel_c &lt;- ggplot(cattle_stats, aes(x = breed, y = mean_gain, fill = treatment)) +\n  geom_col(position = \"dodge\", alpha = 0.8) +\n  geom_errorbar(\n    aes(ymin = mean_gain - se_gain, ymax = mean_gain + se_gain),\n    position = position_dodge(width = 0.9),\n    width = 0.25\n  ) +\n  geom_text(\n    aes(label = paste0(\"n=\", n)),\n    position = position_dodge(width = 0.9),\n    vjust = -0.5,\n    size = 2.5\n  ) +\n  scale_fill_brewer(palette = \"Set2\") +\n  labs(\n    title = \"Breed × Treatment interaction\",\n    x = \"Breed\",\n    y = \"Mean Weight Gain ± SE (kg)\",\n    fill = \"Treatment\"\n  ) +\n  theme_minimal(base_size = 10) +\n  theme(\n    plot.title = element_text(size = 10, face = \"bold\"),\n    legend.position = \"bottom\",\n    legend.title = element_text(size = 9),\n    legend.text = element_text(size = 8),\n    panel.border = element_rect(fill = NA, color = \"black\", linewidth = 0.5)\n  )\n\n# Step 3: Combine with patchwork\nfinal_figure &lt;- (panel_a + panel_b) / panel_c +\n  plot_annotation(\n    tag_levels = \"A\",\n    title = \"Weight gain response to diet treatments in three cattle breeds\",\n    caption = \"Figure 1. (A) Initial weight vs weight gain showing breed-specific responses. (B) Distribution of weight gain by breed; red diamonds show means. (C) Treatment effects within each breed; error bars show ±SE, sample sizes indicated above bars.\",\n    theme = theme(\n      plot.title = element_text(size = 12, face = \"bold\", hjust = 0),\n      plot.caption = element_text(size = 8, hjust = 0)\n    )\n  )\n\nfinal_figure\n\n\n\n\n\n\n\n# Step 4: Save for publication\n# ggsave(\"figures/figure1_cattle_weight_gain.pdf\",\n#        plot = final_figure,\n#        width = 7, height = 7, dpi = 300)\n\n\n\n6.9.3 Journal-Specific Requirements\nDifferent journals have different requirements. Common specifications:\nNature/Science: - Size: 89 mm (single column) or 183 mm (double column) - Format: PDF or EPS (vector) - Font: Arial, 5-7 pt minimum - Resolution: 300+ DPI\nPLOS: - Size: Up to 190 mm width - Format: TIFF, EPS, or PDF - Font: 8-12 pt - Resolution: 300-600 DPI\nJournal of Animal Science: - Size: 3.5” (single) or 7” (double column) - Format: TIFF, EPS, PDF - Font: Times or Arial, 8 pt minimum - Resolution: 300 DPI minimum\n\n\n\n\n\n\nImportantAlways Check Journal Guidelines\n\n\n\nBefore creating final figures: 1. Check journal’s “Instructions for Authors” 2. Look at recently published figures in that journal 3. Verify file format, dimensions, and resolution 4. Test that fonts are readable at final size",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#summary",
    "href": "chapters/ch06-ggplot2_advanced.html#summary",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.10 Summary",
    "text": "6.10 Summary\nThis chapter covered advanced ggplot2 techniques for creating publication-quality figures:\n\n6.10.1 Key Concepts\n\nFaceting allows you to create small multiples for comparing groups:\n\nfacet_wrap() for one variable\nfacet_grid() for two variables (rows × columns)\nControl scales with scales = \"free\", \"fixed\", etc.\n\nStatistical layers add computed values:\n\ngeom_smooth() for trend lines\nstat_summary() for custom summaries\ngeom_errorbar(), geom_pointrange() for uncertainty\n\nTheme customization with theme():\n\nText elements: element_text()\nLines: element_line()\nRectangles: element_rect()\nRemove: element_blank()\n\nColor palettes:\n\nColorBrewer for qualitative, sequential, and diverging data\nViridis for colorblind-friendly, perceptually uniform colors\nManual specification for precise control\n\nText and annotations:\n\ngeom_text() and geom_label() for labeling data points\ngeom_text_repel() to avoid overlaps\nannotate() for custom text, shapes, and arrows\n\nCombining plots:\n\npatchwork: Intuitive operators (+, /, |)\ncowplot: Precise control with plot_grid()\nCollect legends, add labels, control dimensions\n\nPublication workflow:\n\nCheck journal requirements early\nUse appropriate dimensions and resolution\nEnsure text is readable at final size\nSave as PDF (vector) when possible",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#week-6-homework-replicating-a-journal-figure",
    "href": "chapters/ch06-ggplot2_advanced.html#week-6-homework-replicating-a-journal-figure",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.11 Week 6 Homework: Replicating a Journal Figure",
    "text": "6.11 Week 6 Homework: Replicating a Journal Figure\n\n6.11.1 Assignment Overview\nYour task is to replicate a multi-panel figure from a published paper using advanced ggplot2 techniques. This will test your ability to combine everything you’ve learned in Chapters 5 and 6.\n\n\n6.11.2 Part 1: Select a Figure (0 points, but required)\nFind a multi-panel figure (2-4 panels) from a published paper in animal science, agriculture, or related field. The figure should include: - At least 2 different plot types - Multiple groups or categories - Clear data patterns to replicate\nSubmit: PDF of the original figure with citation\n\n\n6.11.3 Part 2: Generate Similar Data (10 points)\nCreate simulated data that will produce similar patterns to the published figure. Your data should: - Have similar sample sizes - Show similar trends or patterns - Include appropriate grouping variables\nSubmit: R code creating your dataset and showing head() and summary()\n\n\n6.11.4 Part 3: Replicate Panels (50 points)\nCreate each panel of the figure using ggplot2. Requirements: - Panel types: Match the original plot types (scatter, bar, box, etc.) - Faceting: Use if present in original - Statistical layers: Include trend lines, error bars, or summaries as shown - Colors: Use colorblind-friendly palettes - Labels: Clear axis labels with units\nSubmit: Code creating each individual panel\n\n\n6.11.5 Part 4: Combine Panels (20 points)\nCombine your panels into a single multi-panel figure using patchwork or cowplot. Requirements: - Layout matches original figure structure - Panel labels (A, B, C, etc.) - Shared or collected legends - Overall title or caption\nSubmit: Code combining panels and the final combined figure\n\n\n6.11.6 Part 5: Polish for Publication (15 points)\nApply final touches: - Custom theme appropriate for publication - Consistent font sizes and styling across panels - Professional-looking overall appearance - Proper spacing and alignment\nSubmit: Final polished figure saved as PDF (300 DPI, 7” width)\n\n\n6.11.7 Part 6: Reflection (5 points)\nWrite 200-300 words addressing: - What was most challenging about replicating the figure? - What design choices did you make differently from the original? - What did you learn about creating publication-quality figures?\n\n\n6.11.8 Example Workflow\n\n# Part 2: Generate data\nset.seed(42)\nmy_data &lt;- tibble(\n  group = rep(c(\"A\", \"B\", \"C\"), each = 30),\n  value1 = rnorm(90, mean = c(50, 55, 60), sd = 5),\n  value2 = value1 * 1.2 + rnorm(90, sd = 3)\n)\n\n# Part 3: Create panels\npanel_a &lt;- ggplot(my_data, aes(x = value1, y = value2, color = group)) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  # ... more customization\n\npanel_b &lt;- ggplot(my_data, aes(x = group, y = value1, fill = group)) +\n  geom_boxplot() +\n  # ... more customization\n\n# Part 4: Combine\nlibrary(patchwork)\nfinal_fig &lt;- panel_a + panel_b +\n  plot_annotation(tag_levels = \"A\") +\n  plot_layout(guides = \"collect\") &\n  theme(legend.position = \"bottom\")\n\n# Part 5: Save\nggsave(\"final_figure.pdf\", final_fig, width = 7, height = 5, dpi = 300)\n\n\n\n6.11.9 Recommended YAML\n---\ntitle: \"Week 6 Homework: Replicating a Journal Figure\"\nauthor: \"Your Name\"\ndate: today\nformat:\n  html:\n    toc: true\n    toc-depth: 2\n    code-fold: false\n    theme: cosmo\n    embed-resources: true\nexecute:\n  warning: false\n  message: false\n---\n\n\n6.11.10 Grading Rubric\n\nPart 2: Data Generation (10%)\n\nData structure appropriate (5%)\nSimilar patterns to original (5%)\n\nPart 3: Individual Panels (50%)\n\nCorrect plot types (15%)\nStatistical layers correct (10%)\nColors and themes (10%)\nLabels and clarity (10%)\nOverall appearance (5%)\n\nPart 4: Combining Panels (20%)\n\nLayout matches original (8%)\nPanel labels correct (6%)\nLegends handled well (6%)\n\nPart 5: Publication Polish (15%)\n\nProfessional appearance (8%)\nConsistent styling (4%)\nAppropriate dimensions (3%)\n\nPart 6: Reflection (5%)\n\nThoughtful analysis of challenges and decisions\n\n\n\n\n6.11.11 Bonus (+10 points)\nAdd one panel that wasn’t in the original figure but provides additional insight into the data. Justify why you added it and what it shows.",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch06-ggplot2_advanced.html#additional-resources",
    "href": "chapters/ch06-ggplot2_advanced.html#additional-resources",
    "title": "6  Advanced ggplot2 and Multi-Panel Plots",
    "section": "6.12 Additional Resources",
    "text": "6.12 Additional Resources\n\n6.12.1 Required Reading\n\nR for Data Science (2e) - Chapter 11: Communication\nggplot2 book (3e) - Chapters 7-10 (Layers, Annotations, Networks)\npatchwork documentation\n\n\n\n6.12.2 Optional Reading\n\nWilke, C.O. (2019). Fundamentals of Data Visualization. O’Reilly. Free online\nTufte, E.R. (2001). The Visual Display of Quantitative Information (2nd ed.). Graphics Press.\nColorblind-Friendly Palettes by Paul Tol\n\n\n\n6.12.3 Videos\n\n“The Grammar of Graphics” by Hadley Wickham (RStudio Conference)\n“ggplot2 Workshop Part 2: Customization” by Thomas Lin Pedersen\n“Making Beautiful Figures in R” by Rafael Irizarry\n\n\n\n6.12.4 Cheat Sheets\n\nggplot2 Extensions ⭐\npatchwork Cheat Sheet\ncowplot Vignettes\n\n\n\n6.12.5 Color Resources\n\nColorBrewer — Test color schemes\nCoolors — Generate palettes\nCoblis — Simulate colorblindness\nViz Palette — Test palette accessibility\n\n\n\n6.12.6 Galleries and Examples\n\nR Graph Gallery: ggplot2 section\nTop 50 ggplot2 Visualizations\nBBC Visual and Data Journalism cookbook for R graphics\n\n\n\n6.12.7 Packages Worth Exploring\n\nggpubr — Publication-ready plots\nggthemes — Additional themes\ngganimate — Animated plots\nplotly — Interactive plots\nggridges — Ridgeline plots\n\n\n\n6.12.8 Useful Websites\n\nggplot2 Tidyverse Page\nStack Overflow: ggplot2 tag\nRStudio Community\nggplot2 GitHub Issues — Report bugs or request features\n\n\nNext Chapter: Data Reshaping, Joining, and Iteration",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Advanced ggplot2 and Multi-Panel Plots</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html",
    "href": "chapters/ch07-tidyr_joins_purrr.html",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "",
    "text": "7.1 Learning Objectives\nBy the end of this chapter, you will be able to:",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#learning-objectives",
    "href": "chapters/ch07-tidyr_joins_purrr.html#learning-objectives",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "",
    "text": "Understand and apply tidy data principles to organize datasets effectively\nReshape data between wide and long formats using pivot_longer() and pivot_wider()\nSplit and combine columns using separate() and unite()\nJoin multiple datasets using SQL-style joins (left_join(), inner_join(), etc.)\nUnderstand when to use different join types and filtering joins\nBind datasets together with bind_rows() and bind_cols()\nUse functional programming with purrr::map() for iteration\nWork with list columns and nested data structures",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#introduction",
    "href": "chapters/ch07-tidyr_joins_purrr.html#introduction",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "7.2 Introduction",
    "text": "7.2 Introduction\nIn previous chapters, you learned to manipulate single datasets with dplyr. Real-world analysis often requires: - Reshaping data between different formats - Combining multiple related datasets - Iterating operations across many groups or files\nThis chapter teaches these essential data wrangling skills using tidyr for reshaping and purrr for iteration.\n\n7.2.1 Setup\n\nlibrary(tidyverse)  # Includes tidyr, dplyr, purrr\nlibrary(readxl)     # For reading Excel files\n\n# Set default theme for plots\ntheme_set(theme_minimal())",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#tidy-data-principles",
    "href": "chapters/ch07-tidyr_joins_purrr.html#tidy-data-principles",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "7.3 Tidy Data Principles",
    "text": "7.3 Tidy Data Principles\n\n7.3.1 What is Tidy Data?\nTidy data follows three interrelated rules:\n\nEach variable forms a column\nEach observation forms a row\nEach type of observational unit forms a table\n\n\n\n\n\n\n\nNoteHadley Wickham’s Tidy Data\n\n\n\nThe concept of tidy data comes from Hadley Wickham’s 2014 paper in the Journal of Statistical Software. Tidy data makes analysis easier because: - Variables are easy to access as columns - Observations are easy to filter as rows - Most tidyverse functions expect tidy data\n\n\n\n\n7.3.2 Tidy vs Untidy Data\nExample 1: Animal weight measurements\nUntidy (wide format):\n\n# Each time point is a separate column\nuntidy_weights &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\", \"A003\"),\n  week_0 = c(45, 48, 43),\n  week_4 = c(52, 54, 50),\n  week_8 = c(58, 61, 56),\n  week_12 = c(64, 67, 62)\n)\n\nuntidy_weights\n\n# A tibble: 3 × 5\n  animal_id week_0 week_4 week_8 week_12\n  &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;\n1 A001          45     52     58      64\n2 A002          48     54     61      67\n3 A003          43     50     56      62\n\n\nTidy (long format):\n\n# Each observation (animal × time) is a separate row\ntidy_weights &lt;- tibble(\n  animal_id = rep(c(\"A001\", \"A002\", \"A003\"), each = 4),\n  week = rep(c(0, 4, 8, 12), times = 3),\n  weight_kg = c(45, 52, 58, 64,  # A001\n                48, 54, 61, 67,  # A002\n                43, 50, 56, 62)  # A003\n)\n\ntidy_weights\n\n# A tibble: 12 × 3\n   animal_id  week weight_kg\n   &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n 1 A001          0        45\n 2 A001          4        52\n 3 A001          8        58\n 4 A001         12        64\n 5 A002          0        48\n 6 A002          4        54\n 7 A002          8        61\n 8 A002         12        67\n 9 A003          0        43\n10 A003          4        50\n11 A003          8        56\n12 A003         12        62\n\n\nWhy is tidy better?\n\n# Easy to plot with ggplot2\nggplot(tidy_weights, aes(x = week, y = weight_kg, color = animal_id)) +\n  geom_line(linewidth = 1) +\n  geom_point(size = 3) +\n  labs(title = \"Animal Growth Curves\",\n       x = \"Week\",\n       y = \"Weight (kg)\",\n       color = \"Animal ID\")\n\n\n\n\n\n\n\n# Easy to calculate summaries\ntidy_weights %&gt;%\n  group_by(week) %&gt;%\n  summarise(\n    mean_weight = mean(weight_kg),\n    sd_weight = sd(weight_kg)\n  )\n\n# A tibble: 4 × 3\n   week mean_weight sd_weight\n  &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;\n1     0        45.3      2.52\n2     4        52        2   \n3     8        58.3      2.52\n4    12        64.3      2.52\n\n\n\n\n7.3.3 Common Messy Data Problems\n\nColumn headers are values, not variable names (like week_0, week_4)\nMultiple variables in one column (like “Holstein-Male”)\nVariables stored in both rows and columns\nMultiple types of observational units in the same table\nSingle observational unit stored in multiple tables\n\nThis chapter teaches how to fix these problems.",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#data-reshaping-with-tidyr",
    "href": "chapters/ch07-tidyr_joins_purrr.html#data-reshaping-with-tidyr",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "7.4 Data Reshaping with tidyr",
    "text": "7.4 Data Reshaping with tidyr\n\n7.4.1 pivot_longer(): Wide to Long\npivot_longer() transforms wide data (many columns) into long data (many rows).\nBasic syntax:\npivot_longer(\n  data,\n  cols = &lt;columns to pivot&gt;,\n  names_to = \"&lt;name for new column with old column names&gt;\",\n  values_to = \"&lt;name for new column with values&gt;\"\n)\n\n7.4.1.1 Example: Pivoting Weight Measurements\n\n# Start with wide format\nwide_weights &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\", \"A003\"),\n  breed = c(\"Holstein\", \"Jersey\", \"Angus\"),\n  week_0 = c(45, 42, 48),\n  week_4 = c(52, 48, 54),\n  week_8 = c(58, 54, 61)\n)\n\nwide_weights\n\n# A tibble: 3 × 5\n  animal_id breed    week_0 week_4 week_8\n  &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1 A001      Holstein     45     52     58\n2 A002      Jersey       42     48     54\n3 A003      Angus        48     54     61\n\n# Pivot to long format\nlong_weights &lt;- wide_weights %&gt;%\n  pivot_longer(\n    cols = starts_with(\"week\"),\n    names_to = \"time_point\",\n    values_to = \"weight_kg\"\n  )\n\nlong_weights\n\n# A tibble: 9 × 4\n  animal_id breed    time_point weight_kg\n  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 A001      Holstein week_0            45\n2 A001      Holstein week_4            52\n3 A001      Holstein week_8            58\n4 A002      Jersey   week_0            42\n5 A002      Jersey   week_4            48\n6 A002      Jersey   week_8            54\n7 A003      Angus    week_0            48\n8 A003      Angus    week_4            54\n9 A003      Angus    week_8            61\n\n\n\n\n7.4.1.2 Selecting Columns to Pivot\nMultiple ways to specify which columns to pivot:\n\n# By name\nwide_weights %&gt;%\n  pivot_longer(\n    cols = c(week_0, week_4, week_8),\n    names_to = \"time_point\",\n    values_to = \"weight_kg\"\n  )\n\n# A tibble: 9 × 4\n  animal_id breed    time_point weight_kg\n  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 A001      Holstein week_0            45\n2 A001      Holstein week_4            52\n3 A001      Holstein week_8            58\n4 A002      Jersey   week_0            42\n5 A002      Jersey   week_4            48\n6 A002      Jersey   week_8            54\n7 A003      Angus    week_0            48\n8 A003      Angus    week_4            54\n9 A003      Angus    week_8            61\n\n# By position\nwide_weights %&gt;%\n  pivot_longer(\n    cols = 3:5,\n    names_to = \"time_point\",\n    values_to = \"weight_kg\"\n  )\n\n# A tibble: 9 × 4\n  animal_id breed    time_point weight_kg\n  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 A001      Holstein week_0            45\n2 A001      Holstein week_4            52\n3 A001      Holstein week_8            58\n4 A002      Jersey   week_0            42\n5 A002      Jersey   week_4            48\n6 A002      Jersey   week_8            54\n7 A003      Angus    week_0            48\n8 A003      Angus    week_4            54\n9 A003      Angus    week_8            61\n\n# Everything except ID columns\nwide_weights %&gt;%\n  pivot_longer(\n    cols = -c(animal_id, breed),\n    names_to = \"time_point\",\n    values_to = \"weight_kg\"\n  )\n\n# A tibble: 9 × 4\n  animal_id breed    time_point weight_kg\n  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 A001      Holstein week_0            45\n2 A001      Holstein week_4            52\n3 A001      Holstein week_8            58\n4 A002      Jersey   week_0            42\n5 A002      Jersey   week_4            48\n6 A002      Jersey   week_8            54\n7 A003      Angus    week_0            48\n8 A003      Angus    week_4            54\n9 A003      Angus    week_8            61\n\n\n\n\n7.4.1.3 Cleaning Column Names During Pivot\nUse names_prefix to remove prefixes and names_transform to change types:\n\n# Remove \"week_\" prefix and convert to numeric\nwide_weights %&gt;%\n  pivot_longer(\n    cols = starts_with(\"week\"),\n    names_to = \"week\",\n    values_to = \"weight_kg\",\n    names_prefix = \"week_\",\n    names_transform = list(week = as.integer)\n  )\n\n# A tibble: 9 × 4\n  animal_id breed     week weight_kg\n  &lt;chr&gt;     &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;\n1 A001      Holstein     0        45\n2 A001      Holstein     4        52\n3 A001      Holstein     8        58\n4 A002      Jersey       0        42\n5 A002      Jersey       4        48\n6 A002      Jersey       8        54\n7 A003      Angus        0        48\n8 A003      Angus        4        54\n9 A003      Angus        8        61\n\n\n\n\n7.4.1.4 Multiple Value Columns\nWhat if you have multiple measurements at each time point?\n\n# Wide data with multiple measurements\nwide_multi &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\"),\n  weight_week0 = c(45, 42),\n  weight_week4 = c(52, 48),\n  height_week0 = c(80, 78),\n  height_week4 = c(85, 82)\n)\n\nwide_multi\n\n# A tibble: 2 × 5\n  animal_id weight_week0 weight_week4 height_week0 height_week4\n  &lt;chr&gt;            &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;\n1 A001                45           52           80           85\n2 A002                42           48           78           82\n\n# Alternative: create separate columns for each measurement\nwide_multi %&gt;%\n  pivot_longer(\n    cols = -animal_id,\n    names_to = c(\".value\", \"week\"),\n    names_pattern = \"(.+)_week(.+)\"\n  )\n\n# A tibble: 4 × 4\n  animal_id week  weight height\n  &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1 A001      0         45     80\n2 A001      4         52     85\n3 A002      0         42     78\n4 A002      4         48     82\n\n\n\n\n\n\n\n\nTipnames_pattern with Regular Expressions\n\n\n\nUse names_pattern with regex to extract parts of column names: - .+ matches one or more characters - (.+) creates a capture group - week(.+) matches “week” followed by captured characters\n\n\n\n\n\n7.4.2 pivot_wider(): Long to Wide\npivot_wider() transforms long data (many rows) into wide data (many columns). It’s the opposite of pivot_longer().\nBasic syntax:\npivot_wider(\n  data,\n  names_from = &lt;column with names for new columns&gt;,\n  values_from = &lt;column with values to fill new columns&gt;\n)\n\n7.4.2.1 Example: Creating a Summary Table\n\n# Long format data\nanimals_long &lt;- tibble(\n  animal_id = rep(c(\"A001\", \"A002\", \"A003\"), each = 3),\n  breed = rep(c(\"Holstein\", \"Jersey\", \"Angus\"), each = 3),\n  treatment = rep(c(\"Control\", \"Treatment_A\", \"Treatment_B\"), times = 3),\n  weight_gain_kg = c(15, 22, 18, 12, 18, 15, 16, 21, 17)\n)\n\nanimals_long\n\n# A tibble: 9 × 4\n  animal_id breed    treatment   weight_gain_kg\n  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                &lt;dbl&gt;\n1 A001      Holstein Control                 15\n2 A001      Holstein Treatment_A             22\n3 A001      Holstein Treatment_B             18\n4 A002      Jersey   Control                 12\n5 A002      Jersey   Treatment_A             18\n6 A002      Jersey   Treatment_B             15\n7 A003      Angus    Control                 16\n8 A003      Angus    Treatment_A             21\n9 A003      Angus    Treatment_B             17\n\n# Pivot wider: treatments become columns\nanimals_wide &lt;- animals_long %&gt;%\n  pivot_wider(\n    names_from = treatment,\n    values_from = weight_gain_kg\n  )\n\nanimals_wide\n\n# A tibble: 3 × 5\n  animal_id breed    Control Treatment_A Treatment_B\n  &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;\n1 A001      Holstein      15          22          18\n2 A002      Jersey        12          18          15\n3 A003      Angus         16          21          17\n\n\n\n\n7.4.2.2 Handling Multiple Value Columns\n\n# Long data with multiple measurements\nmeasurements_long &lt;- tibble(\n  animal_id = rep(c(\"A001\", \"A002\"), each = 4),\n  week = rep(c(0, 4, 8, 12), times = 2),\n  weight_kg = c(45, 52, 58, 64, 42, 48, 54, 60),\n  height_cm = c(80, 85, 88, 91, 78, 82, 85, 88)\n)\n\nmeasurements_long\n\n# A tibble: 8 × 4\n  animal_id  week weight_kg height_cm\n  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 A001          0        45        80\n2 A001          4        52        85\n3 A001          8        58        88\n4 A001         12        64        91\n5 A002          0        42        78\n6 A002          4        48        82\n7 A002          8        54        85\n8 A002         12        60        88\n\n# Pivot wider: weeks become columns for each measurement\nmeasurements_long %&gt;%\n  pivot_wider(\n    names_from = week,\n    values_from = c(weight_kg, height_cm),\n    names_glue = \"{.value}_week{week}\"\n  )\n\n# A tibble: 2 × 9\n  animal_id weight_kg_week0 weight_kg_week4 weight_kg_week8 weight_kg_week12\n  &lt;chr&gt;               &lt;dbl&gt;           &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;\n1 A001                   45              52              58               64\n2 A002                   42              48              54               60\n# ℹ 4 more variables: height_cm_week0 &lt;dbl&gt;, height_cm_week4 &lt;dbl&gt;,\n#   height_cm_week8 &lt;dbl&gt;, height_cm_week12 &lt;dbl&gt;\n\n\n\n\n7.4.2.3 Dealing with Duplicates\nWhat if you have duplicate id-time combinations?\n\n# Data with duplicates\nduplicated_data &lt;- tibble(\n  animal_id = c(\"A001\", \"A001\", \"A002\", \"A002\"),\n  week = c(0, 0, 0, 0),  # Same animal measured twice\n  weight_kg = c(45, 46, 42, 43)\n)\n\nduplicated_data\n\n# A tibble: 4 × 3\n  animal_id  week weight_kg\n  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 A001          0        45\n2 A001          0        46\n3 A002          0        42\n4 A002          0        43\n\n# Summarize first to remove duplicates\nduplicated_data %&gt;%\n  group_by(animal_id, week) %&gt;%\n  summarise(weight_kg = mean(weight_kg), .groups = \"drop\") %&gt;%\n  pivot_wider(\n    names_from = week,\n    values_from = weight_kg\n  )\n\n# A tibble: 2 × 2\n  animal_id   `0`\n  &lt;chr&gt;     &lt;dbl&gt;\n1 A001       45.5\n2 A002       42.5\n\n\n\n\n\n\n\n\nWarningWatch Out for Duplicates!\n\n\n\npivot_wider() creates list-columns when there are multiple values for the same id × names_from combination. Either: - Summarize first (take mean, max, etc.) - Keep as list-column and unnest() later - Check your data for unexpected duplicates\n\n\n\n\n\n7.4.3 separate(): Split One Column into Many\nseparate() splits a single column into multiple columns based on a separator.\nBasic syntax:\nseparate(\n  data,\n  col = &lt;column to split&gt;,\n  into = c(\"&lt;new_col1&gt;\", \"&lt;new_col2&gt;\"),\n  sep = \"&lt;separator&gt;\"\n)\n\n7.4.3.1 Example: Splitting Composite IDs\n\n# Data with composite identifiers\nanimals_composite &lt;- tibble(\n  animal_id = c(\"Holstein_M_001\", \"Jersey_F_002\", \"Angus_M_003\"),\n  weight_kg = c(550, 420, 580)\n)\n\nanimals_composite\n\n# A tibble: 3 × 2\n  animal_id      weight_kg\n  &lt;chr&gt;              &lt;dbl&gt;\n1 Holstein_M_001       550\n2 Jersey_F_002         420\n3 Angus_M_003          580\n\n# Separate into components\nanimals_composite %&gt;%\n  separate(\n    col = animal_id,\n    into = c(\"breed\", \"sex\", \"id_number\"),\n    sep = \"_\"\n  )\n\n# A tibble: 3 × 4\n  breed    sex   id_number weight_kg\n  &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;\n1 Holstein M     001             550\n2 Jersey   F     002             420\n3 Angus    M     003             580\n\n\n\n\n7.4.3.2 Automatic Type Conversion\n\n# Separate and convert types automatically\nanimals_composite %&gt;%\n  separate(\n    col = animal_id,\n    into = c(\"breed\", \"sex\", \"id_number\"),\n    sep = \"_\",\n    convert = TRUE  # Automatically converts to appropriate types\n  )\n\n# A tibble: 3 × 4\n  breed    sex   id_number weight_kg\n  &lt;chr&gt;    &lt;chr&gt;     &lt;int&gt;     &lt;dbl&gt;\n1 Holstein M             1       550\n2 Jersey   F             2       420\n3 Angus    M             3       580\n\n\n\n\n7.4.3.3 Keeping the Original Column\n\n# Keep original column\nanimals_composite %&gt;%\n  separate(\n    col = animal_id,\n    into = c(\"breed\", \"sex\", \"id_number\"),\n    sep = \"_\",\n    remove = FALSE  # Don't remove original column\n  )\n\n# A tibble: 3 × 5\n  animal_id      breed    sex   id_number weight_kg\n  &lt;chr&gt;          &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;\n1 Holstein_M_001 Holstein M     001             550\n2 Jersey_F_002   Jersey   F     002             420\n3 Angus_M_003    Angus    M     003             580\n\n\n\n\n\n7.4.4 unite(): Combine Columns into One\nunite() is the opposite of separate() — it combines multiple columns into one.\nBasic syntax:\nunite(\n  data,\n  col = \"&lt;new_column_name&gt;\",\n  ...,\n  sep = \"&lt;separator&gt;\"\n)\n\n7.4.4.1 Example: Creating Unique IDs\n\n# Separate columns\nanimals_separated &lt;- tibble(\n  farm = c(\"North\", \"South\", \"East\"),\n  breed = c(\"Holstein\", \"Jersey\", \"Angus\"),\n  id_num = c(1, 2, 3),\n  weight_kg = c(550, 420, 580)\n)\n\nanimals_separated\n\n# A tibble: 3 × 4\n  farm  breed    id_num weight_kg\n  &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 North Holstein      1       550\n2 South Jersey        2       420\n3 East  Angus         3       580\n\n# Unite into single ID\nanimals_separated %&gt;%\n  unite(\n    col = \"animal_id\",\n    farm, breed, id_num,\n    sep = \"_\"\n  )\n\n# A tibble: 3 × 2\n  animal_id        weight_kg\n  &lt;chr&gt;                &lt;dbl&gt;\n1 North_Holstein_1       550\n2 South_Jersey_2         420\n3 East_Angus_3           580\n\n\n\n\n7.4.4.2 Keeping Original Columns\n\n# Keep original columns\nanimals_separated %&gt;%\n  unite(\n    col = \"animal_id\",\n    farm, breed, id_num,\n    sep = \"_\",\n    remove = FALSE\n  )\n\n# A tibble: 3 × 5\n  animal_id        farm  breed    id_num weight_kg\n  &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 North_Holstein_1 North Holstein      1       550\n2 South_Jersey_2   South Jersey        2       420\n3 East_Angus_3     East  Angus         3       580\n\n\n\n\n\n7.4.5 When to Use Each Function\n\n\n\n\n\n\n\n\nGoal\nFunction\nExample\n\n\n\n\nMany columns → few rows\npivot_longer()\nweek_0, week_4, week_8 → week column\n\n\nFew columns → many rows\npivot_wider()\nweek column → week_0, week_4, week_8\n\n\nOne column → many columns\nseparate()\n“Holstein_M_001” → breed, sex, id\n\n\nMany columns → one column\nunite()\nbreed, sex, id → “Holstein_M_001”",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#joining-datasets",
    "href": "chapters/ch07-tidyr_joins_purrr.html#joining-datasets",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "7.5 Joining Datasets",
    "text": "7.5 Joining Datasets\nIn real-world analysis, data is often spread across multiple tables. Joins combine tables based on shared keys.\n\n7.5.1 Relational Data Example\n\n# Table 1: Animal information\nanimals &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\", \"A003\", \"A004\"),\n  breed = c(\"Holstein\", \"Jersey\", \"Angus\", \"Holstein\"),\n  birth_date = as.Date(c(\"2023-01-15\", \"2023-02-20\", \"2023-01-10\", \"2023-03-05\"))\n)\n\n# Table 2: Weight records\nweights &lt;- tibble(\n  animal_id = c(\"A001\", \"A001\", \"A002\", \"A002\", \"A005\"),\n  date = as.Date(c(\"2023-06-01\", \"2023-09-01\", \"2023-06-01\", \"2023-09-01\", \"2023-06-01\")),\n  weight_kg = c(180, 220, 150, 185, 200)\n)\n\n# Table 3: Treatment assignments\ntreatments &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\", \"A003\"),\n  treatment = c(\"Control\", \"Treatment_A\", \"Treatment_B\")\n)\n\nanimals\n\n# A tibble: 4 × 3\n  animal_id breed    birth_date\n  &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;    \n1 A001      Holstein 2023-01-15\n2 A002      Jersey   2023-02-20\n3 A003      Angus    2023-01-10\n4 A004      Holstein 2023-03-05\n\nweights\n\n# A tibble: 5 × 3\n  animal_id date       weight_kg\n  &lt;chr&gt;     &lt;date&gt;         &lt;dbl&gt;\n1 A001      2023-06-01       180\n2 A001      2023-09-01       220\n3 A002      2023-06-01       150\n4 A002      2023-09-01       185\n5 A005      2023-06-01       200\n\ntreatments\n\n# A tibble: 3 × 2\n  animal_id treatment  \n  &lt;chr&gt;     &lt;chr&gt;      \n1 A001      Control    \n2 A002      Treatment_A\n3 A003      Treatment_B\n\n\n\n\n7.5.2 Types of Joins\n\n7.5.2.1 Mutating Joins: Add Columns\nVisual representation:\n\n\n\n\n\nflowchart TD\n    A[Mutating Joins&lt;br/&gt;Add columns from y to x] --&gt; B[left_join]\n    A --&gt; C[right_join]\n    A --&gt; D[inner_join]\n    A --&gt; E[full_join]\n\n    B --&gt; B1[Keep all x rows&lt;br/&gt;Add matching y columns]\n    C --&gt; C1[Keep all y rows&lt;br/&gt;Add matching x columns]\n    D --&gt; D1[Keep only matching rows&lt;br/&gt;from both x and y]\n    E --&gt; E1[Keep all rows&lt;br/&gt;from both x and y]\n\n\n\n\n\n\n\n\n\n7.5.3 left_join(): Keep All Left Rows\nVenn Diagram concept: All of LEFT + matching from RIGHT\n\n# Left join: keep all animals, add treatment info\nanimals %&gt;%\n  left_join(treatments, by = \"animal_id\")\n\n# A tibble: 4 × 4\n  animal_id breed    birth_date treatment  \n  &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;     &lt;chr&gt;      \n1 A001      Holstein 2023-01-15 Control    \n2 A002      Jersey   2023-02-20 Treatment_A\n3 A003      Angus    2023-01-10 Treatment_B\n4 A004      Holstein 2023-03-05 &lt;NA&gt;       \n\n\nNotice: - All 4 animals kept (even A004 with no treatment) - A004 gets NA for treatment - Unmatched rows from treatments (if any) are dropped\n\n7.5.3.1 Use left_join() when:\n\nYou want to add information to your main table\nYou want to keep all rows from the main table\nMissing matches should be NA\n\n\n\n\n7.5.4 right_join(): Keep All Right Rows\nVenn Diagram concept: All of RIGHT + matching from LEFT\n\n# Right join: keep all treatments, add animal info\nanimals %&gt;%\n  right_join(treatments, by = \"animal_id\")\n\n# A tibble: 3 × 4\n  animal_id breed    birth_date treatment  \n  &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;     &lt;chr&gt;      \n1 A001      Holstein 2023-01-15 Control    \n2 A002      Jersey   2023-02-20 Treatment_A\n3 A003      Angus    2023-01-10 Treatment_B\n\n\n\n\n\n\n\n\nNoteright_join() is Rarely Used\n\n\n\nright_join(x, y) gives the same result as left_join(y, x). Most people prefer to use left_join() and think about the “main” table being on the left.\n# These are equivalent:\nanimals %&gt;% right_join(treatments)\ntreatments %&gt;% left_join(animals)\n\n\n\n\n7.5.5 inner_join(): Keep Only Matching Rows\nVenn Diagram concept: Only the INTERSECTION\n\n# Inner join: keep only animals with treatments\nanimals %&gt;%\n  inner_join(treatments, by = \"animal_id\")\n\n# A tibble: 3 × 4\n  animal_id breed    birth_date treatment  \n  &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;     &lt;chr&gt;      \n1 A001      Holstein 2023-01-15 Control    \n2 A002      Jersey   2023-02-20 Treatment_A\n3 A003      Angus    2023-01-10 Treatment_B\n\n\nNotice: - Only 3 animals kept (A001, A002, A003) - A004 dropped (no treatment) - Perfect when you only want complete cases\n\n7.5.5.1 Use inner_join() when:\n\nYou only want rows that match in both tables\nUnmatched rows should be excluded\nYou’re analyzing complete cases only\n\n\n\n\n7.5.6 full_join(): Keep All Rows from Both\nVenn Diagram concept: UNION of LEFT and RIGHT\n\n# Full join: keep everything\nanimals %&gt;%\n  full_join(treatments, by = \"animal_id\")\n\n# A tibble: 4 × 4\n  animal_id breed    birth_date treatment  \n  &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;     &lt;chr&gt;      \n1 A001      Holstein 2023-01-15 Control    \n2 A002      Jersey   2023-02-20 Treatment_A\n3 A003      Angus    2023-01-10 Treatment_B\n4 A004      Holstein 2023-03-05 &lt;NA&gt;       \n\n\n\n7.5.6.1 Use full_join() when:\n\nYou want all data from both tables\nYou want to see what’s missing from each table\nYou’ll handle NA values later\n\n\n\n\n7.5.7 Joining with Multiple Keys\nWhat if matching requires multiple columns?\n\n# Farm data with state\nfarms &lt;- tibble(\n  farm_name = c(\"Green Acres\", \"Sunny Farm\", \"Green Acres\"),\n  state = c(\"Iowa\", \"Kansas\", \"Nebraska\"),\n  size_acres = c(500, 350, 600)\n)\n\n# Animal locations\nanimal_locations &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\", \"A003\"),\n  farm_name = c(\"Green Acres\", \"Sunny Farm\", \"Green Acres\"),\n  state = c(\"Iowa\", \"Kansas\", \"Iowa\")\n)\n\n# Join on both farm_name AND state\nanimal_locations %&gt;%\n  left_join(farms, by = c(\"farm_name\", \"state\"))\n\n# A tibble: 3 × 4\n  animal_id farm_name   state  size_acres\n  &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;\n1 A001      Green Acres Iowa          500\n2 A002      Sunny Farm  Kansas        350\n3 A003      Green Acres Iowa          500\n\n\n\n\n7.5.8 Joining with Different Column Names\n\n# Different ID column names\ntable1 &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\", \"A003\"),\n  weight_kg = c(180, 150, 200)\n)\n\ntable2 &lt;- tibble(\n  id = c(\"A001\", \"A002\", \"A004\"),\n  breed = c(\"Holstein\", \"Jersey\", \"Angus\")\n)\n\n# Specify which columns to join on\ntable1 %&gt;%\n  left_join(table2, by = c(\"animal_id\" = \"id\"))\n\n# A tibble: 3 × 3\n  animal_id weight_kg breed   \n  &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;   \n1 A001            180 Holstein\n2 A002            150 Jersey  \n3 A003            200 &lt;NA&gt;    \n\n\n\n\n7.5.9 Filtering Joins: Filter Rows (Don’t Add Columns)\n\n7.5.9.1 semi_join(): Keep Rows with Matches\n\n# Semi join: keep animals that have treatments (but don't add treatment column)\nanimals %&gt;%\n  semi_join(treatments, by = \"animal_id\")\n\n# A tibble: 3 × 3\n  animal_id breed    birth_date\n  &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;    \n1 A001      Holstein 2023-01-15\n2 A002      Jersey   2023-02-20\n3 A003      Angus    2023-01-10\n\n\nUse semi_join() to answer: “Which x rows have a match in y?”\n\n\n7.5.9.2 anti_join(): Keep Rows WITHOUT Matches\n\n# Anti join: keep animals that DON'T have treatments\nanimals %&gt;%\n  anti_join(treatments, by = \"animal_id\")\n\n# A tibble: 1 × 3\n  animal_id breed    birth_date\n  &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;    \n1 A004      Holstein 2023-03-05\n\n\nUse anti_join() to answer: “Which x rows DON’T have a match in y?”\nThis is incredibly useful for finding missing data or orphaned records.\n\n\n\n7.5.10 Join Summary Table\n\n\n\n\n\n\n\n\n\nJoin Type\nRows Kept\nColumns Added\nUse When\n\n\n\n\nleft_join(x, y)\nAll from x\nFrom y\nAdding info to main table\n\n\nright_join(x, y)\nAll from y\nFrom x\nRarely used (use left_join instead)\n\n\ninner_join(x, y)\nOnly matches\nFrom both\nOnly want complete cases\n\n\nfull_join(x, y)\nAll from both\nFrom both\nKeep everything\n\n\nsemi_join(x, y)\nMatches from x\nNone\nFilter x by presence in y\n\n\nanti_join(x, y)\nNon-matches from x\nNone\nFilter x by absence in y\n\n\n\n\n\n7.5.11 Common Join Problems and Solutions\n\n7.5.11.1 Problem 1: Duplicate Keys\n\n# Multiple weights per animal\nweights_dup &lt;- tibble(\n  animal_id = c(\"A001\", \"A001\", \"A002\"),\n  weight_kg = c(180, 185, 150)\n)\n\n# Join creates all combinations\nanimals %&gt;%\n  left_join(weights_dup, by = \"animal_id\")\n\n# A tibble: 5 × 4\n  animal_id breed    birth_date weight_kg\n  &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;         &lt;dbl&gt;\n1 A001      Holstein 2023-01-15       180\n2 A001      Holstein 2023-01-15       185\n3 A002      Jersey   2023-02-20       150\n4 A003      Angus    2023-01-10        NA\n5 A004      Holstein 2023-03-05        NA\n\n\nSolution: If you only want one weight per animal, summarize first:\n\nweights_dup %&gt;%\n  group_by(animal_id) %&gt;%\n  summarise(avg_weight_kg = mean(weight_kg), .groups = \"drop\") %&gt;%\n  left_join(animals, ., by = \"animal_id\")\n\n# A tibble: 4 × 4\n  animal_id breed    birth_date avg_weight_kg\n  &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;             &lt;dbl&gt;\n1 A001      Holstein 2023-01-15          182.\n2 A002      Jersey   2023-02-20          150 \n3 A003      Angus    2023-01-10           NA \n4 A004      Holstein 2023-03-05           NA \n\n\n\n\n\n\n\n\nWarningAlways Specify by =\n\n\n\nIf you don’t specify by, joins use all columns with the same name. This can lead to: - Unintended matches - Silent errors - Confusing results\nBest practice: Always explicitly state by = \"column_name\"\n\n\n\n\n\n7.5.12 Real-World Example: Combining Multiple Tables\n\n# Start with animals\nresult &lt;- animals %&gt;%\n  # Add treatments\n  left_join(treatments, by = \"animal_id\") %&gt;%\n  # Add weights (keeping all weight records)\n  left_join(weights, by = \"animal_id\") %&gt;%\n  # Calculate age at weighing\n  mutate(\n    age_days = as.numeric(date - birth_date),\n    .after = date\n  )\n\nresult\n\n# A tibble: 6 × 7\n  animal_id breed    birth_date treatment   date       age_days weight_kg\n  &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;     &lt;chr&gt;       &lt;date&gt;        &lt;dbl&gt;     &lt;dbl&gt;\n1 A001      Holstein 2023-01-15 Control     2023-06-01      137       180\n2 A001      Holstein 2023-01-15 Control     2023-09-01      229       220\n3 A002      Jersey   2023-02-20 Treatment_A 2023-06-01      101       150\n4 A002      Jersey   2023-02-20 Treatment_A 2023-09-01      193       185\n5 A003      Angus    2023-01-10 Treatment_B NA               NA        NA\n6 A004      Holstein 2023-03-05 &lt;NA&gt;        NA               NA        NA",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#binding-datasets",
    "href": "chapters/ch07-tidyr_joins_purrr.html#binding-datasets",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "7.6 Binding Datasets",
    "text": "7.6 Binding Datasets\nSometimes you need to combine datasets by stacking (rows) or attaching (columns), not by joining on keys.\n\n7.6.1 bind_rows(): Stack Datasets Vertically\nUse when you have the same structure in multiple datasets.\n\n# Data from multiple farms\nfarm_a &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\"),\n  weight_kg = c(180, 150),\n  farm = \"Farm_A\"\n)\n\nfarm_b &lt;- tibble(\n  animal_id = c(\"B001\", \"B002\"),\n  weight_kg = c(170, 160),\n  farm = \"Farm_B\"\n)\n\n# Stack them\nbind_rows(farm_a, farm_b)\n\n# A tibble: 4 × 3\n  animal_id weight_kg farm  \n  &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt; \n1 A001            180 Farm_A\n2 A002            150 Farm_A\n3 B001            170 Farm_B\n4 B002            160 Farm_B\n\n\n\n7.6.1.1 Handling Missing Columns\n\n# Different columns\ndf1 &lt;- tibble(animal_id = \"A001\", weight_kg = 180)\ndf2 &lt;- tibble(animal_id = \"B001\", height_cm = 125)\n\n# bind_rows() fills missing columns with NA\nbind_rows(df1, df2)\n\n# A tibble: 2 × 3\n  animal_id weight_kg height_cm\n  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n1 A001            180        NA\n2 B001             NA       125\n\n\n\n\n7.6.1.2 Adding Source Identifier\n\n# Or use named list\nbind_rows(\n  \"Iowa\" = farm_a,\n  \"Kansas\" = farm_b,\n  .id = \"state\"\n)\n\n# A tibble: 4 × 4\n  state  animal_id weight_kg farm  \n  &lt;chr&gt;  &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt; \n1 Iowa   A001            180 Farm_A\n2 Iowa   A002            150 Farm_A\n3 Kansas B001            170 Farm_B\n4 Kansas B002            160 Farm_B\n\n\n\n\n\n7.6.2 bind_cols(): Attach Datasets Horizontally\n\n\n\n\n\n\nWarningUse bind_cols() with Caution!\n\n\n\nbind_cols() simply attaches columns side-by-side based on row position. It does NOT match by keys!\nProblems: - No checking if rows actually match - Row order must be identical - Easy to create mismatched data\nBetter alternative: Use a join with a row number or ID column.\n\n\n\n# Two datasets with same row order (risky!)\nids &lt;- tibble(animal_id = c(\"A001\", \"A002\", \"A003\"))\nweights &lt;- tibble(weight_kg = c(180, 150, 200))\n\n# Attach side-by-side\nbind_cols(ids, weights)\n\n# A tibble: 3 × 2\n  animal_id weight_kg\n  &lt;chr&gt;         &lt;dbl&gt;\n1 A001            180\n2 A002            150\n3 A003            200\n\n# MUCH SAFER: Use mutate instead if they're truly row-aligned\nids %&gt;%\n  mutate(weight_kg = weights$weight_kg)\n\n# A tibble: 3 × 2\n  animal_id weight_kg\n  &lt;chr&gt;         &lt;dbl&gt;\n1 A001            180\n2 A002            150\n3 A003            200\n\n# Or use a proper join if you have keys!\n\n\n\n7.6.3 When to Use Binding vs Joining\n\n\n\nUse\nbind_rows()\nbind_cols()\nJoin\n\n\n\n\nSame structure, stack vertically\n✅\n❌\n❌\n\n\nDifferent farms/time periods\n✅\n❌\n❌\n\n\nAdd columns based on keys\n❌\n❌\n✅\n\n\nRow-aligned data (same order)\n❌\n⚠️ Use with caution\n❌\n\n\nRelational data (shared IDs)\n❌\n❌\n✅",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#iteration-with-purrr",
    "href": "chapters/ch07-tidyr_joins_purrr.html#iteration-with-purrr",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "7.7 Iteration with purrr",
    "text": "7.7 Iteration with purrr\nThe purrr package provides tools for functional programming — applying functions across elements of a list or vector.\n\n7.7.1 Why Use map() Instead of Loops?\n\n# Example: Calculate mean of each column\n\n# Base R loop approach\ncol_means_loop &lt;- numeric(ncol(mtcars))\nfor (i in seq_along(mtcars)) {\n  col_means_loop[i] &lt;- mean(mtcars[[i]])\n}\ncol_means_loop\n\n [1]  20.090625   6.187500 230.721875 146.687500   3.596563   3.217250\n [7]  17.848750   0.437500   0.406250   3.687500   2.812500\n\n# purrr approach\ncol_means_map &lt;- map_dbl(mtcars, mean)\ncol_means_map\n\n       mpg        cyl       disp         hp       drat         wt       qsec \n 20.090625   6.187500 230.721875 146.687500   3.596563   3.217250  17.848750 \n        vs         am       gear       carb \n  0.437500   0.406250   3.687500   2.812500 \n\n# They're the same!\nall.equal(col_means_loop, col_means_map)\n\n[1] \"names for current but not for target\"\n\n\nBenefits of map(): - More concise - Less error-prone (no index management) - Easier to read intent - Consistent return types\n\n\n\n\n\n\nNoteWhen to Use Loops vs map()\n\n\n\nUse loops when: - You need to modify objects in place - The operation depends on previous iterations - The logic is complex and loops are clearer\nUse map() when: - Applying the same operation to each element - You want consistent output types - You’re working with lists or data frames\n\n\n\n\n7.7.2 Basic map() Functions\n\n# Create example data\nnumbers &lt;- list(\n  a = c(1, 2, 3, 4, 5),\n  b = c(10, 20, 30),\n  c = c(100, 200, 300, 400)\n)\n\n# map() returns a list\nmap(numbers, mean)\n\n$a\n[1] 3\n\n$b\n[1] 20\n\n$c\n[1] 250\n\n# map_dbl() returns a numeric vector\nmap_dbl(numbers, mean)\n\n  a   b   c \n  3  20 250 \n\n# map_chr() returns a character vector\nmap_chr(numbers, \\(x) paste(\"Mean:\", round(mean(x), 1)))\n\n          a           b           c \n  \"Mean: 3\"  \"Mean: 20\" \"Mean: 250\" \n\n# map_int() returns an integer vector\nmap_int(numbers, length)\n\na b c \n5 3 4 \n\n# map_lgl() returns a logical vector\nmap_lgl(numbers, \\(x) mean(x) &gt; 50)\n\n    a     b     c \nFALSE FALSE  TRUE \n\n\n\n\n7.7.3 map() with Data Frames\n\n# Create example animal data\nanimals_list &lt;- list(\n  farm_a = tibble(animal_id = c(\"A001\", \"A002\"), weight_kg = c(180, 150)),\n  farm_b = tibble(animal_id = c(\"B001\", \"B002\"), weight_kg = c(170, 160)),\n  farm_c = tibble(animal_id = c(\"C001\", \"C002\"), weight_kg = c(190, 165))\n)\n\n# Calculate mean weight for each farm\nmap_dbl(animals_list, \\(df) mean(df$weight_kg))\n\nfarm_a farm_b farm_c \n 165.0  165.0  177.5 \n\n# Count rows in each data frame\nmap_int(animals_list, nrow)\n\nfarm_a farm_b farm_c \n     2      2      2 \n\n# Add a new column to each data frame\nmap(animals_list, \\(df) mutate(df, weight_lb = weight_kg * 2.20462))\n\n$farm_a\n# A tibble: 2 × 3\n  animal_id weight_kg weight_lb\n  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n1 A001            180      397.\n2 A002            150      331.\n\n$farm_b\n# A tibble: 2 × 3\n  animal_id weight_kg weight_lb\n  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n1 B001            170      375.\n2 B002            160      353.\n\n$farm_c\n# A tibble: 2 × 3\n  animal_id weight_kg weight_lb\n  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n1 C001            190      419.\n2 C002            165      364.\n\n\n\n\n7.7.4 Anonymous Functions in map()\nThree ways to write anonymous functions:\n\nnumbers &lt;- list(a = 1:5, b = 10:15, c = 20:25)\n\n# 1. Traditional function() syntax\nmap_dbl(numbers, function(x) mean(x) * 2)\n\n a  b  c \n 6 25 45 \n\n# 2. Formula shorthand with ~ and .x\nmap_dbl(numbers, ~ mean(.x) * 2)\n\n a  b  c \n 6 25 45 \n\n# 3. Lambda function with \\() (R &gt;= 4.1)\nmap_dbl(numbers, \\(x) mean(x) * 2)\n\n a  b  c \n 6 25 45 \n\n\nAll three are equivalent. Use whichever you find most readable.\n\n\n7.7.5 map2(): Iterate Over Two Inputs\nWhen you need to iterate over two vectors/lists in parallel:\n\n# Two vectors to iterate over\nweights_kg &lt;- c(180, 150, 200)\nprices_per_kg &lt;- c(5, 5.50, 4.80)\n\n# Calculate total value for each animal\nmap2_dbl(weights_kg, prices_per_kg, \\(w, p) w * p)\n\n[1] 900 825 960\n\n# With names\nanimals &lt;- c(\"A001\", \"A002\", \"A003\")\nmap2_chr(animals, weights_kg, \\(id, wt) paste(id, \"weighs\", wt, \"kg\"))\n\n[1] \"A001 weighs 180 kg\" \"A002 weighs 150 kg\" \"A003 weighs 200 kg\"\n\n\n\n\n7.7.6 pmap(): Iterate Over Many Inputs\nFor more than two inputs, use pmap():\n\n# Data frame with multiple columns\nsales &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\", \"A003\"),\n  weight_kg = c(180, 150, 200),\n  price_per_kg = c(5, 5.50, 4.80),\n  bonus = c(50, 30, 60)\n)\n\n# Calculate total value: (weight * price) + bonus\nsales %&gt;%\n  mutate(\n    total_value = pmap_dbl(\n      list(weight_kg, price_per_kg, bonus),\n      \\(w, p, b) (w * p) + b\n    )\n  )\n\n# A tibble: 3 × 5\n  animal_id weight_kg price_per_kg bonus total_value\n  &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;\n1 A001            180          5      50         950\n2 A002            150          5.5    30         855\n3 A003            200          4.8    60        1020\n\n\n\n\n7.7.7 Practical Example: Reading Multiple Files\n\n# Get list of CSV files\nfile_list &lt;- list.files(path = \"data/\", pattern = \"*.csv\", full.names = TRUE)\n\n# Read all files into a list\nall_data &lt;- map(file_list, read_csv)\n\n# Combine into single data frame with source file\ncombined_data &lt;- map(file_list, read_csv) %&gt;%\n  set_names(basename(file_list)) %&gt;%\n  bind_rows(.id = \"source_file\")\n\n\n\n7.7.8 Handling Errors with safely() and possibly()\nSometimes operations fail for some elements. Handle errors gracefully:\n\n# Some operations might fail\nmixed_list &lt;- list(\n  a = c(1, 2, 3),\n  b = c(\"a\", \"b\", \"c\"),  # This will cause an error with mean()\n  c = c(10, 20, 30)\n)\n\n# This would error:\n# map_dbl(mixed_list, mean)\n\n# Use safely() to catch errors\nsafe_mean &lt;- safely(mean)\nmap(mixed_list, safe_mean)\n\n$a\n$a$result\n[1] 2\n\n$a$error\nNULL\n\n\n$b\n$b$result\n[1] NA\n\n$b$error\nNULL\n\n\n$c\n$c$result\n[1] 20\n\n$c$error\nNULL\n\n# Use possibly() to return a default value on error\npossibly_mean &lt;- possibly(mean, otherwise = NA_real_)\nmap_dbl(mixed_list, possibly_mean)\n\n a  b  c \n 2 NA 20",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#list-columns-and-nested-data",
    "href": "chapters/ch07-tidyr_joins_purrr.html#list-columns-and-nested-data",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "7.8 List Columns and Nested Data",
    "text": "7.8 List Columns and Nested Data\nList columns allow you to store complex objects (like data frames) inside data frame cells.\n\n7.8.1 Creating Nested Data\n\n# Example: Group and nest\nanimals_nested &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\", \"A003\", \"A001\", \"A002\", \"A003\"),\n  week = c(0, 0, 0, 4, 4, 4),\n  weight_kg = c(45, 42, 48, 52, 48, 54)\n) %&gt;%\n  group_by(animal_id) %&gt;%\n  nest()\n\nanimals_nested\n\n# A tibble: 3 × 2\n# Groups:   animal_id [3]\n  animal_id data            \n  &lt;chr&gt;     &lt;list&gt;          \n1 A001      &lt;tibble [2 × 2]&gt;\n2 A002      &lt;tibble [2 × 2]&gt;\n3 A003      &lt;tibble [2 × 2]&gt;\n\n# Each row now contains a data frame in the 'data' column\nanimals_nested$data[[1]]  # Data for first animal\n\n# A tibble: 2 × 2\n   week weight_kg\n  &lt;dbl&gt;     &lt;dbl&gt;\n1     0        45\n2     4        52\n\n\n\n\n7.8.2 Working with Nested Data\n\n# Calculate statistics for each animal's data\nanimals_nested %&gt;%\n  mutate(\n    n_measurements = map_int(data, nrow),\n    mean_weight = map_dbl(data, ~mean(.x$weight_kg)),\n    weight_gain = map_dbl(data, ~diff(range(.x$weight_kg)))\n  )\n\n# A tibble: 3 × 5\n# Groups:   animal_id [3]\n  animal_id data             n_measurements mean_weight weight_gain\n  &lt;chr&gt;     &lt;list&gt;                    &lt;int&gt;       &lt;dbl&gt;       &lt;dbl&gt;\n1 A001      &lt;tibble [2 × 2]&gt;              2        48.5           7\n2 A002      &lt;tibble [2 × 2]&gt;              2        45             6\n3 A003      &lt;tibble [2 × 2]&gt;              2        51             6\n\n\n\n\n7.8.3 Fitting Models to Nested Data\n\n# Create more complete data\nset.seed(123)\ngrowth_data &lt;- tibble(\n  animal_id = rep(c(\"A001\", \"A002\", \"A003\"), each = 5),\n  week = rep(c(0, 2, 4, 6, 8), times = 3),\n  weight_kg = c(\n    45 + (0:4) * 2 + rnorm(5, 0, 1),  # A001\n    42 + (0:4) * 1.8 + rnorm(5, 0, 1),  # A002\n    48 + (0:4) * 2.2 + rnorm(5, 0, 1)   # A003\n  )\n)\n\n# Nest by animal\ngrowth_nested &lt;- growth_data %&gt;%\n  group_by(animal_id) %&gt;%\n  nest()\n\n# Fit linear model to each animal's growth\ngrowth_nested &lt;- growth_nested %&gt;%\n  mutate(\n    model = map(data, ~lm(weight_kg ~ week, data = .x)),\n    growth_rate = map_dbl(model, ~coef(.x)[2])\n  )\n\ngrowth_nested\n\n# A tibble: 3 × 4\n# Groups:   animal_id [3]\n  animal_id data             model  growth_rate\n  &lt;chr&gt;     &lt;list&gt;           &lt;list&gt;       &lt;dbl&gt;\n1 A001      &lt;tibble [5 × 2]&gt; &lt;lm&gt;         1.08 \n2 A002      &lt;tibble [5 × 2]&gt; &lt;lm&gt;         0.627\n3 A003      &lt;tibble [5 × 2]&gt; &lt;lm&gt;         0.910\n\n# Extract coefficients\ngrowth_nested %&gt;%\n  select(animal_id, growth_rate)\n\n# A tibble: 3 × 2\n# Groups:   animal_id [3]\n  animal_id growth_rate\n  &lt;chr&gt;           &lt;dbl&gt;\n1 A001            1.08 \n2 A002            0.627\n3 A003            0.910\n\n\n\n\n7.8.4 Unnesting\nConvert list columns back to regular rows:\n\n# Unnest data column\ngrowth_nested %&gt;%\n  select(animal_id, data) %&gt;%\n  unnest(cols = data)\n\n# A tibble: 15 × 3\n# Groups:   animal_id [3]\n   animal_id  week weight_kg\n   &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n 1 A001          0      44.4\n 2 A001          2      46.8\n 3 A001          4      50.6\n 4 A001          6      51.1\n 5 A001          8      53.1\n 6 A002          0      43.7\n 7 A002          2      44.3\n 8 A002          4      44.3\n 9 A002          6      46.7\n10 A002          8      48.8\n11 A003          0      49.2\n12 A003          2      50.6\n13 A003          4      52.8\n14 A003          6      54.7\n15 A003          8      56.2",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#summary",
    "href": "chapters/ch07-tidyr_joins_purrr.html#summary",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "7.9 Summary",
    "text": "7.9 Summary\nThis chapter covered three major topics for advanced data wrangling:\n\n7.9.1 Data Reshaping (tidyr)\n\npivot_longer(): Wide → Long format\n\nConvert column names to values\nStack measurements\n\npivot_wider(): Long → Wide format\n\nCreate summary tables\nSpread values across columns\n\nseparate() & unite(): Split or combine columns\n\nExtract information from composite columns\nCreate unique identifiers\n\n\n\n\n7.9.2 Joining Datasets\n\nMutating joins (add columns):\n\nleft_join(): Keep all left, add matching right\ninner_join(): Keep only matches\nfull_join(): Keep everything\n\nFiltering joins (filter rows):\n\nsemi_join(): Keep rows with matches\nanti_join(): Keep rows without matches\n\nBinding:\n\nbind_rows(): Stack vertically\nbind_cols(): Attach horizontally (use cautiously)\n\n\n\n\n7.9.3 Iteration (purrr)\n\nmap() functions: Apply functions to each element\n\nmap(): Returns list\nmap_dbl(), map_chr(), map_int(), map_lgl(): Return vectors\n\nMultiple inputs:\n\nmap2(): Two inputs\npmap(): Many inputs\n\nList columns: Store complex objects in data frames\n\nnest(): Create nested data\nunnest(): Expand nested data",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#week-7-homework-multi-table-data-integration",
    "href": "chapters/ch07-tidyr_joins_purrr.html#week-7-homework-multi-table-data-integration",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "7.10 Week 7 Homework: Multi-Table Data Integration",
    "text": "7.10 Week 7 Homework: Multi-Table Data Integration\n\n7.10.1 Assignment Overview\nYou will work with three related datasets about a pig feeding trial. Your task is to reshape, join, and analyze the data using techniques from this chapter.\n\n\n7.10.2 Part 1: Data Generation (0 points, but required)\nRun this code to create your datasets:\n\nlibrary(tidyverse)\nset.seed(2024)\n\n# Dataset 1: Pig information\npigs &lt;- tibble(\n  pig_id = paste0(\"P\", 1001:1050),\n  breed = sample(c(\"Yorkshire\", \"Duroc\", \"Hampshire\"), 50, replace = TRUE),\n  birth_date = as.Date(\"2023-03-01\") + sample(0:30, 50, replace = TRUE),\n  initial_weight_kg = rnorm(50, mean = 8, sd = 1)\n)\n\n# Dataset 2: Feed records (wide format - needs reshaping!)\nfeed_wide &lt;- tibble(\n  pig_id = paste0(\"P\", 1001:1050),\n  week_1_kg = rnorm(50, mean = 5, sd = 0.5),\n  week_2_kg = rnorm(50, mean = 6, sd = 0.6),\n  week_3_kg = rnorm(50, mean = 7, sd = 0.7),\n  week_4_kg = rnorm(50, mean = 8, sd = 0.8)\n)\n\n# Dataset 3: Treatment assignments (some pigs, not all)\ntreatments &lt;- tibble(\n  pig_id = sample(paste0(\"P\", 1001:1050), 40),\n  treatment = sample(c(\"Standard\", \"HighProtein\", \"Supplement\"), 40, replace = TRUE),\n  treatment_start = as.Date(\"2023-03-15\")\n)\n\n# Dataset 4: Health records (long format, multiple records per pig)\nhealth &lt;- tibble(\n  pig_id = rep(sample(paste0(\"P\", 1001:1050), 30), each = 3),\n  check_date = rep(as.Date(\"2023-03-15\") + c(7, 14, 21), times = 30),\n  health_score = sample(1:10, 90, replace = TRUE),\n  temperature_C = rnorm(90, mean = 39, sd = 0.5)\n)\n\n# Save datasets\nwrite_csv(pigs, \"pigs.csv\")\nwrite_csv(feed_wide, \"feed_wide.csv\")\nwrite_csv(treatments, \"treatments.csv\")\nwrite_csv(health, \"health.csv\")\n\n\n\n7.10.3 Part 2: Data Reshaping (25 points)\nTask 1 (10 points): Reshape feed_wide from wide to long format - Create columns: pig_id, week, feed_consumed_kg - Convert week to numeric (remove “week_” prefix and “_kg” suffix) - Show first 10 rows\nTask 2 (10 points): Create a summary table showing average feed by week - Calculate mean feed consumed for each week - Reshape to wide format where weeks are columns - Add a “total” column with sum across weeks\nTask 3 (5 points): In the health dataset, separate check_date into year, month, day\n\n\n7.10.4 Part 3: Joining Datasets (30 points)\nTask 1 (10 points): Create a master dataset - Start with pigs - Add treatment information (keep all pigs) - Add the reshaped feed data (long format) - Show structure and first 15 rows\nTask 2 (10 points): Analyze which pigs DON’T have health records - Use an appropriate filtering join - Show pig_id, breed, and initial_weight_kg - How many pigs lack health records?\nTask 3 (10 points): Create a complete cases dataset - Only include pigs that have: - Treatment assignments - Feed records for all 4 weeks - At least one health record - How many pigs remain? - What’s the average initial weight?\n\n\n7.10.5 Part 4: Complex Joins (20 points)\nTask 1 (10 points): Calculate total feed consumption per pig - Sum feed_consumed_kg across all weeks for each pig - Join with pig information and treatment - Create a table showing mean total feed by breed and treatment - Which breed × treatment combination consumed most feed?\nTask 2 (10 points): Identify treatment effects - Calculate average health_score for each pig - Join with treatment information - Compare average health scores across treatments - Create a visualization (boxplot or violin plot)\n\n\n7.10.6 Part 5: Iteration with purrr (20 points)\nTask 1 (10 points): Calculate summary statistics for each breed - Nest data by breed - Use map() to calculate for each breed: - Number of pigs - Mean initial weight - Mean total feed consumed (if you calculated it in Part 4) - Mean health score (if available) - Unnest results into a summary table\nTask 2 (10 points): Fit models to nested data - Nest feed data by pig_id - Fit a linear model of feed_consumed_kg ~ week for each pig - Extract the slope (growth rate of feed consumption) - Which pig has the highest feed growth rate? - Which breed has the highest average feed growth rate?\n\n\n7.10.7 Part 6: Reflection (5 points)\nWrite 200-300 words addressing: - Which type of join did you use most and why? - What was the most challenging aspect of reshaping the data? - When did you choose map() vs a loop (if at all)? - What insights did you discover about the pig feeding trial?\n\n\n7.10.8 Recommended YAML\n---\ntitle: \"Week 7 Homework: Multi-Table Data Integration\"\nauthor: \"Your Name\"\ndate: today\nformat:\n  html:\n    toc: true\n    toc-depth: 3\n    code-fold: false\n    theme: cosmo\n    embed-resources: true\nexecute:\n  warning: false\n  message: false\n---\n\n\n7.10.9 Grading Rubric\n\nPart 2: Data Reshaping (25%)\n\nCorrect pivoting to long format (10%)\nSummary table correctly reshaped (10%)\nDate separation correct (5%)\n\nPart 3: Joining Datasets (30%)\n\nMaster dataset correctly created (10%)\nAnti-join to find missing health records (10%)\nComplete cases filtering correct (10%)\n\nPart 4: Complex Joins (20%)\n\nTotal feed calculation and table (10%)\nTreatment effects analysis (10%)\n\nPart 5: Iteration with purrr (20%)\n\nNested summaries by breed (10%)\nModel fitting with map (10%)\n\nPart 6: Reflection (5%)\n\nThoughtful analysis of methods and insights\n\n\n\n\n7.10.10 Bonus (+10 points)\n\nCreate a function that takes a pig_id and returns a plot of their feed consumption over time\nUse map() to generate plots for all pigs in one breed\nCombine plots using patchwork (from Chapter 6)",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch07-tidyr_joins_purrr.html#additional-resources",
    "href": "chapters/ch07-tidyr_joins_purrr.html#additional-resources",
    "title": "7  Data Reshaping, Joining, and Iteration",
    "section": "7.11 Additional Resources",
    "text": "7.11 Additional Resources\n\n7.11.1 Required Reading\n\nR for Data Science (2e) - Chapters 19-21 (Joins, Tidy Data, Iteration)\ntidyr documentation\npurrr documentation\nWickham, H. (2014). “Tidy Data.” Journal of Statistical Software, 59(10). Link\n\n\n\n7.11.2 Optional Reading\n\nTidy Data Tutor - Interactive visual guide\npurrr tutorial by Jenny Bryan\nRelational Data chapter from R4DS\n\n\n\n7.11.3 Videos\n\n“Tidy Data and tidyr” by RStudio / Posit\n“Iteration with purrr” by RStudio / Posit\n“Row-oriented workflows” by Jenny Bryan\n\n\n\n7.11.4 Cheat Sheets\n\ntidyr Cheat Sheet\npurrr Cheat Sheet\nData Import Cheat Sheet\n\n\n\n7.11.5 Interactive Learning\n\nRStudio Primers: Tidy Your Data\nRStudio Primers: Iterate\n\n\n\n7.11.6 Useful Websites\n\nTidy Data Principles\ndplyr join vignette\npurrr GitHub\nStack Overflow: tidyr tag\n\n\nNext Chapter: Special Data Formats, Integration, and Course Wrap-up",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Data Reshaping, Joining, and Iteration</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html",
    "href": "chapters/ch08-special_formats.html",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "",
    "text": "8.1 Learning Objectives\nBy the end of this chapter, you will be able to:",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#learning-objectives",
    "href": "chapters/ch08-special_formats.html#learning-objectives",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "",
    "text": "Read data from SAS (.sas7bdat), SPSS (.sav), and Stata (.dta) files using the haven package\nWork with Excel files for reading (simple and advanced) and writing with formatting\nUse janitor for data cleaning tasks like fixing column names and removing duplicates\nManipulate dates and times effectively with lubridate\nCreate dynamic strings with the glue package\nApply the complete data science workflow from raw data to final report\nImplement reproducibility best practices in your analysis projects\nUnderstand how data science skills enable statistical analysis (Part 2 preview)\nIdentify career paths in data science and resources for continued learning\nComplete a capstone project integrating all skills from Part 1",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#introduction",
    "href": "chapters/ch08-special_formats.html#introduction",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.2 Introduction",
    "text": "8.2 Introduction\nCongratulations on reaching the final chapter of Part 1! Over the past seven weeks, you’ve built a comprehensive foundation in data science using R, RStudio, and the tidyverse ecosystem. You’ve learned to read data, clean and transform it, visualize patterns, and create reproducible reports.\nThis chapter serves three important purposes:\n\nTechnical Skills: Introduce additional tools for working with data in formats you’ll encounter in the real world\nIntegration: Review and synthesize the complete data science workflow\nTransition: Prepare you for Part 2 (statistics) and point you toward continued learning\n\nIn the real world, data rarely arrives in clean CSV files. You might receive:\n\nData from colleagues using SAS, SPSS, or Stata (common in animal science research)\nExcel files with multiple sheets, formatting, and formulas\nMessy column names that need standardization\nDate and time data in various formats\nThe need to create formatted Excel reports for stakeholders\n\nThis chapter will equip you to handle these situations confidently.\n\n\n\n\n\n\nNoteInstalling Packages for This Chapter\n\n\n\nYou’ll need several packages that may not be installed yet:\ninstall.packages(c(\n  \"haven\",      # Read SAS, SPSS, Stata files\n  \"readxl\",     # Read Excel files (you should have this)\n  \"writexl\",    # Write simple Excel files\n  \"openxlsx\",   # Advanced Excel operations\n  \"janitor\",    # Data cleaning utilities\n  \"lubridate\",  # Date/time manipulation\n  \"glue\"        # String interpolation\n))\n\n\n\n# Load packages\nlibrary(tidyverse)  # Core data science tools\nlibrary(haven)      # Statistical software files\nlibrary(readxl)     # Read Excel\nlibrary(writexl)    # Write simple Excel\nlibrary(janitor)    # Data cleaning\nlibrary(lubridate)  # Dates and times\nlibrary(glue)       # String interpolation\n\n# Optional: Install openxlsx if you need advanced Excel formatting\n# install.packages(\"openxlsx\")",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#reading-data-from-statistical-software",
    "href": "chapters/ch08-special_formats.html#reading-data-from-statistical-software",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.3 Reading Data from Statistical Software",
    "text": "8.3 Reading Data from Statistical Software\nMany researchers in animal science and related fields use SAS, SPSS, or Stata for their analyses. If you need to collaborate with these researchers or access legacy data, you’ll need to read these file formats. The haven package makes this straightforward.\n\n8.3.1 The haven Package\nhaven can read:\n\nSAS: .sas7bdat (data files), .sas7bcat (catalog files)\nSPSS: .sav files\nStata: .dta files\n\nAll three software packages support variable labels (longer descriptions) and value labels (like factor levels in R). haven preserves this metadata.\n\n\n8.3.2 Reading SAS Files\n\n# Create a simulated SAS-style dataset for demonstration\n# In reality, you'd receive this file from a colleague\nsas_cattle_data &lt;- tibble(\n  id = 1:10,\n  treatment = c(1, 1, 1, 1, 1, 2, 2, 2, 2, 2),\n  weight_gain_kg = c(125, 130, 118, 135, 128, 145, 152, 138, 148, 143)\n)\n\n# Save as SAS file (for demonstration)\nwrite_sas(sas_cattle_data, \"../data/raw/cattle_trial.sas7bdat\")\n\n# Now read it back\ncattle_sas &lt;- read_sas(\"../data/raw/cattle_trial.sas7bdat\")\ncattle_sas\n\n# A tibble: 10 × 3\n      id treatment weight_gain_kg\n   &lt;dbl&gt;     &lt;dbl&gt;          &lt;dbl&gt;\n 1     1         1            125\n 2     2         1            130\n 3     3         1            118\n 4     4         1            135\n 5     5         1            128\n 6     6         2            145\n 7     7         2            152\n 8     8         2            138\n 9     9         2            148\n10    10         2            143\n\n\n\n\n8.3.3 Reading SPSS Files\n\n# Create labeled data similar to SPSS format\nspss_feeding_data &lt;- tibble(\n  animal_id = 1:15,\n  feed_type = c(rep(1, 5), rep(2, 5), rep(3, 5)),\n  daily_gain_kg = rnorm(15, mean = 1.5, sd = 0.3)\n)\n\n# Write as SPSS file\nwrite_sav(spss_feeding_data, \"../data/raw/feeding_study.sav\")\n\n# Read it back\nfeeding_spss &lt;- read_sav(\"../data/raw/feeding_study.sav\")\nfeeding_spss\n\n# A tibble: 15 × 3\n   animal_id feed_type daily_gain_kg\n       &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1         1         1          1.49\n 2         2         1          1.11\n 3         3         1          1.34\n 4         4         1          1.63\n 5         5         1          1.32\n 6         6         2          1.52\n 7         7         2          1.51\n 8         8         2          1.33\n 9         9         2          1.34\n10        10         2          1.67\n11        11         3          1.82\n12        12         3          1.01\n13        13         3          1.94\n14        14         3          1.32\n15        15         3          1.29\n\n\n\n\n8.3.4 Reading Stata Files\n\n# Create Stata-style dataset\nstata_breeding_data &lt;- tibble(\n  cow_id = 1001:1020,\n  parity = sample(1:4, 20, replace = TRUE),\n  conception = sample(0:1, 20, replace = TRUE)\n)\n\n# Write as Stata file\nwrite_dta(stata_breeding_data, \"../data/raw/breeding_records.dta\")\n\n# Read it back\nbreeding_stata &lt;- read_dta(\"../data/raw/breeding_records.dta\")\nbreeding_stata\n\n# A tibble: 20 × 3\n   cow_id parity conception\n    &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;\n 1   1001      1          1\n 2   1002      3          1\n 3   1003      4          1\n 4   1004      2          1\n 5   1005      2          0\n 6   1006      4          0\n 7   1007      2          1\n 8   1008      1          0\n 9   1009      2          1\n10   1010      1          0\n11   1011      3          1\n12   1012      1          1\n13   1013      3          0\n14   1014      2          0\n15   1015      4          0\n16   1016      2          1\n17   1017      4          1\n18   1018      2          1\n19   1019      1          0\n20   1020      4          1\n\n\n\n\n8.3.5 Working with Labeled Data\nStatistical software often uses numeric codes with text labels. For example, 1 = \"Control\" and 2 = \"Treatment\". haven preserves these as labeled vectors.\n\n# Create data with value labels (like SPSS)\nlabeled_data &lt;- tibble(\n  id = 1:6,\n  sex = c(1, 2, 1, 2, 1, 2),\n  breed = c(1, 1, 2, 2, 3, 3)\n) %&gt;%\n  mutate(\n    sex = labelled(sex, c(\"Male\" = 1, \"Female\" = 2)),\n    breed = labelled(breed, c(\"Angus\" = 1, \"Hereford\" = 2, \"Charolais\" = 3))\n  )\n\n# View the structure\nstr(labeled_data)\n\ntibble [6 × 3] (S3: tbl_df/tbl/data.frame)\n $ id   : int [1:6] 1 2 3 4 5 6\n $ sex  : dbl+lbl [1:6] 1, 2, 1, 2, 1, 2\n   ..@ labels: Named num [1:2] 1 2\n   .. ..- attr(*, \"names\")= chr [1:2] \"Male\" \"Female\"\n $ breed: dbl+lbl [1:6] 1, 1, 2, 2, 3, 3\n   ..@ labels: Named num [1:3] 1 2 3\n   .. ..- attr(*, \"names\")= chr [1:3] \"Angus\" \"Hereford\" \"Charolais\"\n\n# Convert labeled columns to factors for analysis\nlabeled_data_clean &lt;- labeled_data %&gt;%\n  mutate(\n    sex = as_factor(sex),\n    breed = as_factor(breed)\n  )\n\nlabeled_data_clean\n\n# A tibble: 6 × 3\n     id sex    breed    \n  &lt;int&gt; &lt;fct&gt;  &lt;fct&gt;    \n1     1 Male   Angus    \n2     2 Female Angus    \n3     3 Male   Hereford \n4     4 Female Hereford \n5     5 Male   Charolais\n6     6 Female Charolais\n\n\n\n\n\n\n\n\nTipConverting Labeled Data\n\n\n\nWhen you read SAS/SPSS/Stata files with labels, use as_factor() from haven to convert labeled columns to regular R factors. This makes them easier to work with in tidyverse functions.\n# Convert all labeled columns at once\ndata_clean &lt;- data %&gt;%\n  mutate(across(where(is.labelled), as_factor))\n\n\n\n\n8.3.6 When You Might Need haven\n\nCollaborating with researchers who use SAS/SPSS/Stata\nAccessing institutional databases stored in these formats\nConverting legacy data to R for new analyses\nMaintaining compatibility with established workflows",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#working-with-excel-files",
    "href": "chapters/ch08-special_formats.html#working-with-excel-files",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.4 Working with Excel Files",
    "text": "8.4 Working with Excel Files\nExcel is ubiquitous in business and research settings. While we generally prefer CSV files for data storage, you’ll often need to read from or write to Excel files.\n\n8.4.1 Reading Excel Files (Review + Advanced)\nWe covered readxl basics in Week 2. Let’s review and add advanced features:\n\n# Create a sample Excel file for demonstration\ncattle_summary &lt;- tibble(\n  breed = c(\"Angus\", \"Hereford\", \"Charolais\", \"Limousin\"),\n  n_animals = c(45, 38, 42, 35),\n  avg_weight_kg = c(520, 495, 535, 510),\n  avg_gain_kg = c(1.45, 1.38, 1.52, 1.41)\n)\n\n# Write to Excel\nwrite_xlsx(cattle_summary, \"../data/raw/cattle_summary.xlsx\")\n\n# Read back - basic\nread_excel(\"../data/raw/cattle_summary.xlsx\")\n\n# A tibble: 4 × 4\n  breed     n_animals avg_weight_kg avg_gain_kg\n  &lt;chr&gt;         &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;\n1 Angus            45           520        1.45\n2 Hereford         38           495        1.38\n3 Charolais        42           535        1.52\n4 Limousin         35           510        1.41\n\n\n\n\n8.4.2 Reading Specific Ranges and Sheets\n\n\n\n\n\n\nNoteNote on openxlsx\n\n\n\nThe code below uses openxlsx to create multi-sheet Excel files. If you want to run this code, first install the package:\ninstall.packages(\"openxlsx\")\nlibrary(openxlsx)\n\n\n\n# Create multi-sheet Excel file\nweight_data &lt;- tibble(\n  week = 0:12,\n  weight_kg = c(42, 48, 54, 60, 66, 72, 78, 84, 90, 96, 102, 108, 114)\n)\n\nhealth_data &lt;- tibble(\n  week = 0:12,\n  health_score = sample(1:5, 13, replace = TRUE)\n)\n\n# Write multiple sheets (requires openxlsx package)\nlibrary(openxlsx)\nwb &lt;- createWorkbook()\naddWorksheet(wb, \"Weights\")\naddWorksheet(wb, \"Health\")\nwriteData(wb, \"Weights\", weight_data)\nwriteData(wb, \"Health\", health_data)\nsaveWorkbook(wb, \"../data/raw/calf_data.xlsx\", overwrite = TRUE)\n\n# Read specific sheet\nread_excel(\"../data/raw/calf_data.xlsx\", sheet = \"Weights\")\n\n# List all sheets first\nexcel_sheets(\"../data/raw/calf_data.xlsx\")\n\n# Read specific range (e.g., first 5 rows)\nread_excel(\"../data/raw/calf_data.xlsx\",\n           sheet = \"Weights\",\n           range = \"A1:B6\")\n\n\n\n8.4.3 Writing Simple Excel Files with writexl\nFor basic Excel export without formatting, writexl is fast and simple:\n\n# Write single sheet\nwrite_xlsx(cattle_summary, \"output_cattle.xlsx\")\n\n# Write multiple sheets as a list\ncattle_list &lt;- list(\n  Summary = cattle_summary,\n  Weights = weight_data,\n  Health = health_data\n)\n\nwrite_xlsx(cattle_list, \"output_multi_sheet.xlsx\")\n\n\n\n8.4.4 Advanced Excel Operations with openxlsx\nFor formatted reports, use openxlsx:\n\n# Create a formatted Excel report\nwb &lt;- createWorkbook()\n\n# Add a worksheet\naddWorksheet(wb, \"Performance Report\")\n\n# Write title\nwriteData(wb, \"Performance Report\",\n          \"Cattle Performance Summary - 2024\",\n          startRow = 1, startCol = 1)\n\n# Format title (bold, larger, colored)\naddStyle(wb, \"Performance Report\",\n         style = createStyle(fontSize = 16, textDecoration = \"bold\",\n                            fgFill = \"#4F81BD\", fontColour = \"#FFFFFF\"),\n         rows = 1, cols = 1:4, gridExpand = TRUE)\n\n# Write data starting at row 3\nwriteData(wb, \"Performance Report\", cattle_summary, startRow = 3)\n\n# Format header row\naddStyle(wb, \"Performance Report\",\n         style = createStyle(textDecoration = \"bold\",\n                            fgFill = \"#D9E1F2\"),\n         rows = 3, cols = 1:4, gridExpand = TRUE)\n\n# Add borders\naddStyle(wb, \"Performance Report\",\n         style = createStyle(border = \"TopBottomLeftRight\"),\n         rows = 3:7, cols = 1:4, gridExpand = TRUE, stack = TRUE)\n\n# Set column widths\nsetColWidths(wb, \"Performance Report\", cols = 1:4, widths = c(15, 12, 15, 15))\n\n# Add a formula (total animals)\nwriteFormula(wb, \"Performance Report\",\n             x = \"=SUM(B4:B7)\",\n             startRow = 8, startCol = 2)\n\n# Save\nsaveWorkbook(wb, \"../data/raw/formatted_cattle_report.xlsx\", overwrite = TRUE)\n\n\n\n\n\n\n\nImportantWhen to Use Excel vs CSV\n\n\n\nUse CSV when: - Data will be read by R, Python, or databases - You want simplicity and version control (text files) - No special formatting needed\nUse Excel when: - Sharing with non-technical stakeholders - Multiple related tables (sheets) belong together - Formatting enhances readability (colors, bold, borders) - Client specifically requests Excel format",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#essential-utility-packages",
    "href": "chapters/ch08-special_formats.html#essential-utility-packages",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.5 Essential Utility Packages",
    "text": "8.5 Essential Utility Packages\nThree packages that will make your data cleaning life much easier:\n\n8.5.1 The janitor Package\njanitor provides simple functions for common data cleaning tasks.\n\n8.5.1.1 clean_names(): Fix Messy Column Names\n\n# Messy data with terrible column names (realistic!)\nmessy_data &lt;- tibble(\n  `Animal ID` = 1:5,\n  `Birth Weight (kg)` = c(42, 45, 39, 44, 41),\n  `Final Weight-KG` = c(520, 535, 498, 528, 512),\n  `%Daily Gain` = c(1.45, 1.48, 1.39, 1.46, 1.43),\n  `Dam's ID` = c(101, 102, 103, 104, 105)\n)\n\nmessy_data\n\n# A tibble: 5 × 5\n  `Animal ID` `Birth Weight (kg)` `Final Weight-KG` `%Daily Gain` `Dam's ID`\n        &lt;int&gt;               &lt;dbl&gt;             &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;\n1           1                  42               520          1.45        101\n2           2                  45               535          1.48        102\n3           3                  39               498          1.39        103\n4           4                  44               528          1.46        104\n5           5                  41               512          1.43        105\n\n# Clean it up!\nclean_data &lt;- messy_data %&gt;%\n  clean_names()\n\nclean_data\n\n# A tibble: 5 × 5\n  animal_id birth_weight_kg final_weight_kg percent_daily_gain dams_id\n      &lt;int&gt;           &lt;dbl&gt;           &lt;dbl&gt;              &lt;dbl&gt;   &lt;dbl&gt;\n1         1              42             520               1.45     101\n2         2              45             535               1.48     102\n3         3              39             498               1.39     103\n4         4              44             528               1.46     104\n5         5              41             512               1.43     105\n\n# Now you have snake_case names that work well with R\n# animal_id, birth_weight_kg, final_weight_kg, percent_daily_gain, dam_s_id\n\n\n\n\n\n\n\nTipAlways Use clean_names()\n\n\n\nMake it a habit to run clean_names() immediately after reading data from external sources. It prevents countless headaches with spaces, special characters, and inconsistent naming.\ndata &lt;- read_excel(\"messy_file.xlsx\") %&gt;%\n  clean_names()\n\n\n\n\n8.5.1.2 tabyl(): Better Frequency Tables\n\n# Create sample data\nanimals &lt;- tibble(\n  breed = sample(c(\"Angus\", \"Hereford\", \"Charolais\"), 100, replace = TRUE),\n  sex = sample(c(\"M\", \"F\"), 100, replace = TRUE),\n  treatment = sample(c(\"Control\", \"Treatment\"), 100, replace = TRUE)\n)\n\n# Base R table (basic)\ntable(animals$breed)\n\n\n    Angus Charolais  Hereford \n       34        28        38 \n\n# janitor's tabyl (better!)\nanimals %&gt;%\n  tabyl(breed)\n\n     breed  n percent\n     Angus 34    0.34\n Charolais 28    0.28\n  Hereford 38    0.38\n\n# Two-way table with totals\nanimals %&gt;%\n  tabyl(breed, sex) %&gt;%\n  adorn_totals(c(\"row\", \"col\"))\n\n     breed  F  M Total\n     Angus 19 15    34\n Charolais 14 14    28\n  Hereford 21 17    38\n     Total 54 46   100\n\n# Add percentages\nanimals %&gt;%\n  tabyl(breed, sex) %&gt;%\n  adorn_percentages(\"row\") %&gt;%\n  adorn_pct_formatting(digits = 1) %&gt;%\n  adorn_ns()  # Add counts in parentheses\n\n     breed          F          M\n     Angus 55.9% (19) 44.1% (15)\n Charolais 50.0% (14) 50.0% (14)\n  Hereford 55.3% (21) 44.7% (17)\n\n\n\n\n8.5.1.3 remove_empty() and get_dupes()\n\n# Data with empty rows/columns\ndata_with_empties &lt;- tibble(\n  id = c(1, 2, NA, 4, 5),\n  weight = c(50, 55, NA, 60, 65),\n  empty_col = rep(NA, 5),\n  breed = c(\"Angus\", \"Angus\", NA, \"Hereford\", \"Hereford\")\n)\n\n# Remove empty rows and columns\ndata_with_empties %&gt;%\n  remove_empty(c(\"rows\", \"cols\"))\n\n# A tibble: 4 × 3\n     id weight breed   \n  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;   \n1     1     50 Angus   \n2     2     55 Angus   \n3     4     60 Hereford\n4     5     65 Hereford\n\n# Find duplicates\ndup_data &lt;- tibble(\n  animal_id = c(\"A001\", \"A002\", \"A003\", \"A001\", \"A004\"),\n  weight = c(50, 55, 60, 50, 65)\n)\n\ndup_data %&gt;%\n  get_dupes(animal_id)\n\n# A tibble: 2 × 3\n  animal_id dupe_count weight\n  &lt;chr&gt;          &lt;int&gt;  &lt;dbl&gt;\n1 A001               2     50\n2 A001               2     50\n\n\n\n\n\n8.5.2 The lubridate Package\nWorking with dates and times in base R is painful. lubridate makes it intuitive.\n\n8.5.2.1 Parsing Dates\n\n# Different date formats\ndates_various &lt;- c(\"2024-01-15\", \"January 20, 2024\", \"03/25/2024\", \"2024-04-10\")\n\n# lubridate parsing functions\nymd(\"2024-01-15\")  # Year-Month-Day\n\n[1] \"2024-01-15\"\n\nmdy(\"03/25/2024\")  # Month-Day-Year\n\n[1] \"2024-03-25\"\n\ndmy(\"15-01-2024\")  # Day-Month-Year\n\n[1] \"2024-01-15\"\n\n# Parse with times\nymd_hms(\"2024-01-15 14:30:00\")\n\n[1] \"2024-01-15 14:30:00 UTC\"\n\n\n\n\n8.5.2.2 Extracting Components\n\n# Sample birthdates\ncattle &lt;- tibble(\n  animal_id = c(\"C001\", \"C002\", \"C003\", \"C004\"),\n  birth_date = ymd(c(\"2023-03-15\", \"2023-04-02\", \"2023-03-28\", \"2023-05-10\"))\n)\n\ncattle &lt;- cattle %&gt;%\n  mutate(\n    birth_year = year(birth_date),\n    birth_month = month(birth_date, label = TRUE),  # Jan, Feb, etc.\n    birth_day = day(birth_date),\n    birth_week = week(birth_date),\n    birth_quarter = quarter(birth_date)\n  )\n\ncattle\n\n# A tibble: 4 × 7\n  animal_id birth_date birth_year birth_month birth_day birth_week birth_quarter\n  &lt;chr&gt;     &lt;date&gt;          &lt;dbl&gt; &lt;ord&gt;           &lt;int&gt;      &lt;dbl&gt;         &lt;int&gt;\n1 C001      2023-03-15       2023 Mar                15         11             1\n2 C002      2023-04-02       2023 Apr                 2         14             2\n3 C003      2023-03-28       2023 Mar                28         13             1\n4 C004      2023-05-10       2023 May                10         19             2\n\n\n\n\n8.5.2.3 Date Arithmetic\n\n# Calculate age in days\ncattle &lt;- cattle %&gt;%\n  mutate(\n    today_date = ymd(\"2024-11-14\"),\n    age_days = as.numeric(today_date - birth_date),\n    age_weeks = age_days / 7,\n    age_months = age_days / 30.44  # Approximate\n  )\n\ncattle %&gt;%\n  select(animal_id, birth_date, age_days, age_weeks)\n\n# A tibble: 4 × 4\n  animal_id birth_date age_days age_weeks\n  &lt;chr&gt;     &lt;date&gt;        &lt;dbl&gt;     &lt;dbl&gt;\n1 C001      2023-03-15      610      87.1\n2 C002      2023-04-02      592      84.6\n3 C003      2023-03-28      597      85.3\n4 C004      2023-05-10      554      79.1\n\n# Add time intervals\ncattle %&gt;%\n  mutate(\n    weaning_date = birth_date + weeks(8),\n    yearling_date = birth_date + years(1)\n  ) %&gt;%\n  select(animal_id, birth_date, weaning_date, yearling_date)\n\n# A tibble: 4 × 4\n  animal_id birth_date weaning_date yearling_date\n  &lt;chr&gt;     &lt;date&gt;     &lt;date&gt;       &lt;date&gt;       \n1 C001      2023-03-15 2023-05-10   2024-03-15   \n2 C002      2023-04-02 2023-05-28   2024-04-02   \n3 C003      2023-03-28 2023-05-23   2024-03-28   \n4 C004      2023-05-10 2023-07-05   2024-05-10   \n\n\n\n\n8.5.2.4 Working with Periods and Durations\n\n# Periods (human units: 1 month = 1 month regardless of days)\ntoday() + months(1)\n\n[1] \"2025-12-14\"\n\ntoday() + weeks(2)\n\n[1] \"2025-11-28\"\n\n# Durations (exact seconds)\ntoday() + ddays(30)  # Exactly 30 days\n\n[1] \"2025-12-14\"\n\ntoday() + dhours(24)  # Exactly 24 hours\n\n[1] \"2025-11-15\"\n\n# Time intervals\nbirth &lt;- ymd(\"2023-03-15\")\nweaning &lt;- ymd(\"2023-05-10\")\n\ninterval(birth, weaning) / days(1)  # Days between dates\n\n[1] 56\n\ninterval(birth, weaning) / weeks(1)  # Weeks between dates\n\n[1] 8\n\n\n\n\n\n\n\n\nTipCommon lubridate Functions\n\n\n\n\nParsing: ymd(), mdy(), dmy(), ymd_hms()\nExtracting: year(), month(), day(), week(), quarter(), wday()\nArithmetic: + / - with days(), weeks(), months(), years()\nCurrent date/time: today(), now()\nIntervals: interval(), time_length()\n\n\n\n\n\n\n8.5.3 The glue Package\nglue provides elegant string interpolation (inserting variables into strings).\n\n# Instead of paste() or paste0()\nanimal_id &lt;- \"C001\"\nweight &lt;- 520\nbreed &lt;- \"Angus\"\n\n# Base R way (clunky)\npaste0(\"Animal \", animal_id, \" (\", breed, \") weighs \", weight, \" kg\")\n\n[1] \"Animal C001 (Angus) weighs 520 kg\"\n\n# glue way (elegant!)\nglue(\"Animal {animal_id} ({breed}) weighs {weight} kg\")\n\nAnimal C001 (Angus) weighs 520 kg\n\n\n\n8.5.3.1 glue_data() for Data Frames\n\n# Create reports for each row\ncattle_report &lt;- tibble(\n  animal_id = c(\"C001\", \"C002\", \"C003\"),\n  breed = c(\"Angus\", \"Hereford\", \"Charolais\"),\n  weight = c(520, 495, 535),\n  gain = c(1.45, 1.38, 1.52)\n)\n\ncattle_report %&gt;%\n  mutate(\n    summary = glue_data(.,\n      \"Animal {animal_id} is a {breed} weighing {weight} kg with a daily gain of {gain} kg/day.\"\n    )\n  ) %&gt;%\n  pull(summary)\n\nAnimal C001 is a Angus weighing 520 kg with a daily gain of 1.45 kg/day.\nAnimal C002 is a Hereford weighing 495 kg with a daily gain of 1.38 kg/day.\nAnimal C003 is a Charolais weighing 535 kg with a daily gain of 1.52 kg/day.\n\n\n\n\n8.5.3.2 Dynamic Column Names\n\n# Create dynamic column names in summaries\ntreatment_var &lt;- \"treatment\"\nmetric &lt;- \"weight_gain\"\n\n# Use glue for dynamic naming\nsummary_data &lt;- tibble(\n  treatment = c(\"Control\", \"Treatment A\"),\n  avg_gain = c(1.35, 1.48)\n)\n\nsummary_data %&gt;%\n  rename(\n    \"{treatment_var}\" := treatment,\n    \"avg_{metric}\" := avg_gain\n  )\n\n# A tibble: 2 × 2\n  treatment   avg_weight_gain\n  &lt;chr&gt;                 &lt;dbl&gt;\n1 Control                1.35\n2 Treatment A            1.48",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#the-complete-data-science-workflow",
    "href": "chapters/ch08-special_formats.html#the-complete-data-science-workflow",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.6 The Complete Data Science Workflow",
    "text": "8.6 The Complete Data Science Workflow\nLet’s synthesize everything you’ve learned into a comprehensive workflow. This is what you do when tackling a real data analysis project:\n\nWorkflow DiagramEight-Week Review\n\n\n\n\n\n\n\nflowchart TD\n    A[1. Define Question] --&gt; B[2. Import Data]\n    B --&gt; C[3. Explore & Clean]\n    C --&gt; D[4. Transform & Reshape]\n    D --&gt; E[5. Visualize]\n    E --&gt; F[6. Model/Analyze]\n    F --&gt; G[7. Communicate Results]\n    G --&gt; H{Need to Refine?}\n    H --&gt;|Yes| C\n    H --&gt;|No| I[Final Report]\n\n    style A fill:#e1f5ff\n    style I fill:#d4edda\n\n\n\n\n\n\n\n\n\nWeek 1: Foundations\n\nWhat is data science\nBest practices (project structure, file naming, database concepts)\nR, RStudio, Quarto setup\nVersion control basics\n\nWeek 2: Getting Started\n\nRStudio interface\nR Projects and working directories\nReading CSV (readr::read_csv()) and Excel (readxl::read_excel())\nFirst look at data: glimpse(), summary()\n\nWeek 3: Data Types & Strings\n\nR data types (numeric, character, factor, logical, dates)\nString manipulation (stringr)\nRegular expressions\nThe pipe operator: %&gt;% and |&gt;\nFirst dplyr verbs: select(), filter()\n\nWeek 4: Data Manipulation\n\nCore dplyr verbs: mutate(), arrange(), group_by(), summarise()\nacross() for multiple columns\nConditional logic: if_else(), case_when()\nHandling missing data: drop_na(), replace_na()\nWindow functions: lag(), lead(), cumsum()\n\nWeek 5: Visualization Basics\n\nGrammar of Graphics\nEssential geoms: geom_point(), geom_line(), geom_col(), geom_histogram(), geom_boxplot(), geom_violin()\nAesthetic mappings: x, y, color, fill, size, shape\nScales, themes, labels\nSaving plots with ggsave()\n\nWeek 6: Advanced Visualization\n\nFaceting: facet_wrap(), facet_grid()\nStatistical layers: geom_smooth(), stat_summary()\nCustom themes and color palettes\nText annotations\nCombining plots: cowplot, patchwork\n\nWeek 7: Reshaping & Joining\n\nTidy data principles\nReshaping: pivot_longer(), pivot_wider(), separate(), unite()\nJoining: left_join(), right_join(), inner_join(), full_join()\nFunctional programming: purrr::map() functions\nList columns and nested data\n\nWeek 8: Integration (This Week!)\n\nReading statistical software files (haven)\nExcel workflows (readxl, writexl, openxlsx)\nData cleaning (janitor)\nDate/time handling (lubridate)\nString interpolation (glue)\nComplete workflow synthesis\n\n\n\n\n\n\n8.6.1 Real-World Example: Complete Analysis Pipeline\nLet’s work through a complete example from raw messy data to final report.\nScenario: You receive cattle weight data from three sources: 1. Birth records from a colleague (SAS file) 2. Monthly weight measurements (messy Excel file) 3. Treatment assignments (CSV file)\nYour task: Analyze weight gain by treatment and create a report.\n\n8.6.1.1 Step 1: Import from Multiple Sources\n\n# Source 1: Birth records (SAS file - simulated)\nbirth_records &lt;- tibble(\n  animal_id = sprintf(\"C%03d\", 1:20),\n  birth_date = ymd(\"2023-03-01\") + days(sample(0:30, 20, replace = TRUE)),\n  dam_id = sample(1001:1010, 20, replace = TRUE),\n  birth_weight_kg = rnorm(20, mean = 42, sd = 5)\n)\n\n# Source 2: Monthly weights (messy Excel - simulated)\nweight_measurements &lt;- tibble(\n  `Animal ID` = rep(sprintf(\"C%03d\", 1:20), each = 4),\n  `Measurement Date` = rep(c(\"2023-04-01\", \"2023-05-01\", \"2023-06-01\", \"2023-07-01\"), times = 20),\n  `Body Weight (kg)` = rnorm(80, mean = 150, sd = 30) + rep(0:3, times = 20) * 50,\n  `Notes` = sample(c(NA, \"healthy\", \"\"), 80, replace = TRUE)\n)\n\n# Source 3: Treatment assignments (CSV)\ntreatments &lt;- tibble(\n  animal_id = sprintf(\"C%03d\", 1:20),\n  treatment = sample(c(\"Control\", \"High Protein\", \"Standard\"), 20, replace = TRUE),\n  assigned_date = ymd(\"2023-03-15\")\n)\n\n\n\n8.6.1.2 Step 2: Clean Each Dataset\n\n# Clean birth records (already clean in this case)\nbirth_clean &lt;- birth_records\n\n# Clean weight measurements\nweights_clean &lt;- weight_measurements %&gt;%\n  clean_names() %&gt;%  # Fix column names\n  mutate(\n    measurement_date = ymd(measurement_date),\n    body_weight_kg = round(body_weight_kg, 1)\n  ) %&gt;%\n  select(-notes)  # Remove empty notes column\n\n# Clean treatments (already clean)\ntreatments_clean &lt;- treatments\n\nglimpse(weights_clean)\n\nRows: 80\nColumns: 3\n$ animal_id        &lt;chr&gt; \"C001\", \"C001\", \"C001\", \"C001\", \"C002\", \"C002\", \"C002…\n$ measurement_date &lt;date&gt; 2023-04-01, 2023-05-01, 2023-06-01, 2023-07-01, 2023…\n$ body_weight_kg   &lt;dbl&gt; 161.9, 184.9, 292.1, 331.9, 118.7, 212.0, 207.8, 317.…\n\n\n\n\n8.6.1.3 Step 3: Join Datasets\n\n# Join everything together\ncomplete_data &lt;- birth_clean %&gt;%\n  left_join(treatments_clean, by = \"animal_id\") %&gt;%\n  left_join(weights_clean, by = \"animal_id\") %&gt;%\n  # Calculate age at measurement\n  mutate(\n    age_days = as.numeric(measurement_date - birth_date),\n    age_weeks = age_days / 7\n  )\n\nglimpse(complete_data)\n\nRows: 80\nColumns: 10\n$ animal_id        &lt;chr&gt; \"C001\", \"C001\", \"C001\", \"C001\", \"C002\", \"C002\", \"C002…\n$ birth_date       &lt;date&gt; 2023-03-07, 2023-03-07, 2023-03-07, 2023-03-07, 2023…\n$ dam_id           &lt;int&gt; 1005, 1005, 1005, 1005, 1010, 1010, 1010, 1010, 1005,…\n$ birth_weight_kg  &lt;dbl&gt; 40.21847, 40.21847, 40.21847, 40.21847, 48.69910, 48.…\n$ treatment        &lt;chr&gt; \"High Protein\", \"High Protein\", \"High Protein\", \"High…\n$ assigned_date    &lt;date&gt; 2023-03-15, 2023-03-15, 2023-03-15, 2023-03-15, 2023…\n$ measurement_date &lt;date&gt; 2023-04-01, 2023-05-01, 2023-06-01, 2023-07-01, 2023…\n$ body_weight_kg   &lt;dbl&gt; 161.9, 184.9, 292.1, 331.9, 118.7, 212.0, 207.8, 317.…\n$ age_days         &lt;dbl&gt; 25, 55, 86, 116, 28, 58, 89, 119, 18, 48, 79, 109, 3,…\n$ age_weeks        &lt;dbl&gt; 3.5714286, 7.8571429, 12.2857143, 16.5714286, 4.00000…\n\n\n\n\n8.6.1.4 Step 4: Transform and Summarize\n\n# Calculate growth rates\ngrowth_analysis &lt;- complete_data %&gt;%\n  group_by(animal_id, treatment) %&gt;%\n  summarise(\n    birth_weight = first(birth_weight_kg),\n    final_weight = last(body_weight_kg),\n    total_gain = final_weight - birth_weight,\n    days_measured = max(age_days),\n    avg_daily_gain = total_gain / days_measured,\n    .groups = \"drop\"\n  )\n\n# Summary by treatment\ntreatment_summary &lt;- growth_analysis %&gt;%\n  group_by(treatment) %&gt;%\n  summarise(\n    n = n(),\n    mean_adg = mean(avg_daily_gain),\n    sd_adg = sd(avg_daily_gain),\n    min_adg = min(avg_daily_gain),\n    max_adg = max(avg_daily_gain)\n  )\n\ntreatment_summary\n\n# A tibble: 3 × 6\n  treatment        n mean_adg sd_adg min_adg max_adg\n  &lt;chr&gt;        &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;\n1 Control          4     2.33  0.248    2.12    2.61\n2 High Protein    12     2.42  0.330    2.05    2.93\n3 Standard         4     2.84  0.616    1.96    3.38\n\n\n\n\n8.6.1.5 Step 5: Visualize\n\n# Growth curves by treatment\ncomplete_data %&gt;%\n  ggplot(aes(x = age_weeks, y = body_weight_kg,\n             color = treatment, group = animal_id)) +\n  geom_line(alpha = 0.5) +\n  geom_smooth(aes(group = treatment), method = \"lm\", se = TRUE, size = 1.5) +\n  labs(\n    title = \"Cattle Growth Curves by Treatment\",\n    x = \"Age (weeks)\",\n    y = \"Body Weight (kg)\",\n    color = \"Treatment\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n# Distribution of daily gains\ngrowth_analysis %&gt;%\n  ggplot(aes(x = treatment, y = avg_daily_gain, fill = treatment)) +\n  geom_boxplot(alpha = 0.7) +\n  geom_jitter(width = 0.2, alpha = 0.5) +\n  labs(\n    title = \"Average Daily Gain by Treatment\",\n    x = \"Treatment\",\n    y = \"Average Daily Gain (kg/day)\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\n8.6.1.6 Step 6: Create Summary Report\n\n# Generate text summaries with glue\ntreatment_summary %&gt;%\n  mutate(\n    report_text = glue(\n      \"The {treatment} group (n={n}) had an average daily gain of {round(mean_adg, 3)} kg/day (SD = {round(sd_adg, 3)}).\"\n    )\n  ) %&gt;%\n  pull(report_text)\n\nThe Control group (n=4) had an average daily gain of 2.334 kg/day (SD = 0.248).\nThe High Protein group (n=12) had an average daily gain of 2.423 kg/day (SD = 0.33).\nThe Standard group (n=4) had an average daily gain of 2.844 kg/day (SD = 0.616).\n\n\n\n\n\n\n\n\nNoteComplete Workflow in Action\n\n\n\nThis example demonstrates: 1. Importing from multiple sources 2. Cleaning with janitor::clean_names() and date parsing 3. Joining with left_join() 4. Transforming with mutate() and group_by() %&gt;% summarise() 5. Visualizing with ggplot2 6. Communicating with summary statistics and glue\nThis is exactly what you’ll do in your capstone project!",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#reproducibility-best-practices",
    "href": "chapters/ch08-special_formats.html#reproducibility-best-practices",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.7 Reproducibility Best Practices",
    "text": "8.7 Reproducibility Best Practices\nReproducibility means someone else (including future you!) can re-run your analysis and get the same results. Here’s a checklist:\n\n8.7.1 Project Organization Checklist\nmy_project/\n├── README.md              # Project overview, how to run\n├── my_project.Rproj       # RStudio project file\n├── data/\n│   ├── raw/               # Original, untouched data (read-only!)\n│   └── processed/         # Cleaned data (created by scripts)\n├── code/\n│   ├── 01_import.R        # Data import scripts\n│   ├── 02_clean.R         # Cleaning scripts\n│   └── 03_analysis.R      # Analysis scripts\n├── output/\n│   ├── figures/           # Generated plots\n│   └── tables/            # Generated tables\n├── reports/\n│   └── final_report.qmd   # Quarto reports\n└── renv.lock              # Package versions (if using renv)\n\n\n\n\n\n\nImportantGolden Rules\n\n\n\n\nNever modify raw data files - Keep originals pristine\nUse R Projects - Avoid setwd(), use relative paths\nDocument everything - Comments, README, codebooks\nVersion control - Use Git from the start\nExplicit packages - Always use library() at the top of scripts\n\n\n\n\n\n8.7.2 File Naming Conventions\nGood file names: - 2024-11-14_cattle-weights_final.csv - 01_import_data.R - fig01_growth_curves.png\nBad file names: - data.csv (not descriptive) - analysis final FINAL v2.R (version chaos) - my file with spaces.csv (spaces cause problems)\nPrinciples: - Use dates: YYYY-MM-DD_description.ext - Use numbers for order: 01_, 02_, 03_ - Use hyphens or underscores (no spaces) - Be descriptive but concise - Use lowercase\n\n\n8.7.3 Code Style Best Practices\n\n# GOOD: Clear, readable, consistent\ncattle_data &lt;- read_csv(\"../data/raw/cattle_weights.csv\") %&gt;%\n  clean_names() %&gt;%\n  filter(weight_kg &gt; 0) %&gt;%\n  mutate(\n    weight_lb = weight_kg * 2.20462,\n    weight_category = case_when(\n      weight_kg &lt; 400 ~ \"Light\",\n      weight_kg &lt; 500 ~ \"Medium\",\n      TRUE ~ \"Heavy\"\n    )\n  )\n\n# BAD: Hard to read, inconsistent spacing\ncattle_data&lt;-read_csv(\"../data/raw/cattle_weights.csv\")%&gt;%clean_names()%&gt;%filter(weight_kg&gt;0)%&gt;%mutate(weight_lb=weight_kg*2.20462,weight_category=case_when(weight_kg&lt;400~\"Light\",weight_kg&lt;500~\"Medium\",TRUE~\"Heavy\"))\n\nStyle Guidelines: - Use &lt;- for assignment (not =) - Space around operators: x + y not x+y - Space after commas: f(x, y) not f(x,y) - Indent code blocks (2 or 4 spaces) - Break long pipes into multiple lines - Use meaningful variable names: cattle_weights not cw or x\n\n\n8.7.4 Package Version Management\nR packages update frequently. To ensure reproducibility across time:\n\n# Option 1: Document package versions in your report\nsessionInfo()\n\n# Option 2: Use renv for package management (recommended for important projects)\n# install.packages(\"renv\")\n# renv::init()    # Initialize renv for project\n# renv::snapshot() # Save package versions\n# renv::restore()  # Restore exact package versions\n\n\n\n8.7.5 Quarto/R Markdown Best Practices\n---\ntitle: \"Cattle Growth Analysis\"\nauthor: \"Your Name\"\ndate: today  # Auto-updates to current date\nformat:\n  html:\n    toc: true\n    toc-depth: 3\n    code-fold: show  # Or 'false' to hide code\n    code-tools: true\n    embed-resources: true  # Single-file output\n    theme: cosmo\nexecute:\n  warning: false\n  message: false\n  cache: true  # Cache results for faster re-rendering\n---\nCode Chunk Options: - #| eval: true - Run the code - #| echo: true - Show the code - #| warning: false - Hide warnings - #| message: false - Hide messages - #| fig-width: 8 - Control figure dimensions - #| fig-cap: \"Caption text\" - Add figure captions\n\n\n\n\n\n\nTipReproducibility Checklist\n\n\n\nBefore sharing your analysis:\n\nAll file paths are relative (no hard-coded /Users/yourname/)\nRaw data files are unchanged and documented\nAll required packages are loaded at the top\nCode runs from start to finish without errors\nRandom processes use set.seed() for reproducibility\nREADME explains how to run the analysis\nOutput folder contains generated figures/tables\nQuarto document renders successfully",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#transitioning-to-part-2-how-data-science-enables-statistics",
    "href": "chapters/ch08-special_formats.html#transitioning-to-part-2-how-data-science-enables-statistics",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.8 Transitioning to Part 2: How Data Science Enables Statistics",
    "text": "8.8 Transitioning to Part 2: How Data Science Enables Statistics\nYou’ve spent 8 weeks building essential data manipulation and visualization skills. Now you might wonder: Why was this necessary? How does this connect to statistics?\n\n8.8.1 The Foundation for Statistical Analysis\nStatistical analyses require clean, well-structured data. Consider what you need before running a t-test or regression:\n\nData must be imported - You can’t analyze data you can’t load (Weeks 2, 8)\nData must be clean - Missing values, wrong types, messy names cause errors (Weeks 3, 4, 8)\nData must be in the right format - Wide vs long, joined tables (Week 7)\nYou must understand your data - Distributions, outliers, patterns (Weeks 5, 6)\nYou must communicate results - Tables, plots, reports (Weeks 5, 6, Quarto throughout)\n\nThe reality: 80% of a data scientist’s time is spent on steps 1-4. Only 20% is the “sexy” statistical modeling.\n\n\n8.8.2 Example: What Part 1 Enables in Part 2\nLet’s say you want to test if a new feed supplement affects cattle weight gain (Week 4 of Part 2: t-tests).\nPart 1 skills needed:\n\n# Import data (Week 2)\ncattle &lt;- read_csv(\"cattle_trial.csv\")\n\n# Clean and prepare (Weeks 3, 4)\ncattle_clean &lt;- cattle %&gt;%\n  clean_names() %&gt;%\n  filter(!is.na(weight_gain_kg)) %&gt;%\n  mutate(\n    treatment = factor(treatment, levels = c(\"Control\", \"Supplement\")),\n    weight_gain_kg = as.numeric(weight_gain_kg)\n  )\n\n# Check assumptions with visualization (Week 5)\ncattle_clean %&gt;%\n  ggplot(aes(x = treatment, y = weight_gain_kg)) +\n  geom_boxplot()\n\n# NOW you're ready for Part 2: Statistical test\nt.test(weight_gain_kg ~ treatment, data = cattle_clean)\n\nWithout Part 1 skills, you’d be stuck at the import or cleaning stage!\n\n\n8.8.3 Preview of Part 2 Topics\nYou’ll learn to answer questions like:\n\nWeek 1-2: Are these two groups really different, or is it just random variation?\nWeek 3: What’s the probability of observing this result by chance?\nWeek 4: Is this treatment effective? (t-tests)\nWeek 5: Do these three feed types differ? (ANOVA)\nWeek 6: Are these two variables associated? (Chi-square tests)\nWeek 7: Can I predict weight from age? (Simple regression)\nWeek 8: How do multiple factors affect the outcome? (Multiple regression)\n\nThe connection: Every statistical test in Part 2 builds on the data wrangling and visualization skills you’ve mastered in Part 1.\n\n\n8.8.4 Your Advantage\nBy learning data science before statistics, you have a huge advantage over traditional statistics courses:\n\nYou won’t be stuck fighting with data import and cleaning\nYou can visualize data to build intuition before testing\nYou can create professional reports to communicate findings\nYou understand reproducibility from the start\n\nMany students learn statistics first and struggle to apply it because they lack these skills. You’re ahead of the curve!",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#career-paths-in-data-science",
    "href": "chapters/ch08-special_formats.html#career-paths-in-data-science",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.9 Career Paths in Data Science",
    "text": "8.9 Career Paths in Data Science\nData science skills are in high demand across industries. Here are potential career paths, especially relevant to animal science backgrounds:\n\n8.9.1 1. Data Analyst\nWhat they do: - Explore data to find patterns - Create dashboards and reports - Support business/research decisions with data\nSkills emphasized: - SQL and database queries - Data visualization (Tableau, Power BI, or R/ggplot2) - Basic statistics - Communication with non-technical stakeholders\nAnimal science examples: - Analyzing herd performance data for dairy operations - Market analysis for livestock commodities - Reporting on feed efficiency metrics\nTypical salary: $60,000 - $90,000 USD\n\n\n\n8.9.2 2. Data Scientist\nWhat they do: - Build predictive models - Design experiments (A/B testing) - Extract insights from complex data - Communicate findings to guide strategy\nSkills emphasized: - Statistical modeling and machine learning - Programming (R, Python) - Data visualization and storytelling - Domain expertise (animal science is valuable!)\nAnimal science examples: - Predicting disease outbreaks in livestock populations - Optimizing breeding programs with genomic data - Forecasting feed prices and supply chain logistics\nTypical salary: $90,000 - $140,000 USD\n\n\n\n8.9.3 3. Quantitative Analyst (Animal Science Focus)\nWhat they do: - Analyze breeding values and genetic data - Model growth curves and production traits - Support precision livestock farming initiatives\nSkills emphasized: - Statistical genetics - R programming (especially for quantitative genetics) - Knowledge of linear models and BLUP - Domain expertise in animal breeding/nutrition\nAnimal science examples: - Calculating EPDs (Expected Progeny Differences) for breed associations - Analyzing feed efficiency and genetic correlations - Supporting genomic selection programs\nTypical salary: $70,000 - $110,000 USD\n\n\n\n8.9.4 4. Machine Learning Engineer (Industry/Tech)\nWhat they do: - Build and deploy ML models at scale - Work on computer vision, NLP, recommendation systems - Optimize model performance and infrastructure\nSkills emphasized: - Python programming - Deep learning frameworks (TensorFlow, PyTorch) - Cloud platforms (AWS, GCP, Azure) - Software engineering practices\nAnimal science examples: - Computer vision for livestock monitoring (activity, health scoring) - Predictive models for precision agriculture - Sensor data analysis (wearables for animals)\nTypical salary: $110,000 - $180,000 USD (tech companies)\n\n\n\n8.9.5 5. Researcher / Academic Data Scientist\nWhat they do: - Conduct research using quantitative methods - Publish peer-reviewed papers - Teach statistics and data science - Collaborate on grants and interdisciplinary projects\nSkills emphasized: - Advanced statistics and experimental design - R and Quarto for reproducible research - Domain expertise in animal science - Scientific writing and communication\nAnimal science examples: - University faculty studying animal nutrition with data-driven approaches - USDA researchers analyzing agricultural data - Industry R&D scientists at feed companies\nTypical salary: $65,000 - $120,000 USD (varies widely by institution)\n\n\n\n8.9.6 What Skills Do You Need Beyond This Course?\n\n8.9.6.1 For Most Data Science Roles:\n\nSQL: Querying databases (critical!)\nMore statistics: Hypothesis testing, regression, time series (Part 2 covers basics)\nMachine learning basics: Classification, regression, clustering\nPython (optional but valuable): Complements R skills\nVersion control: Git and GitHub (introduced in Week 1)\nCommunication: Writing reports, presenting to stakeholders\n\n\n\n8.9.6.2 For Specialized Roles:\n\nQuantitative genetics: BLUP, genomic selection (for breeding/genetics roles)\nCloud computing: AWS, GCP for scaling analyses\nBig data tools: Spark, Hadoop (for massive datasets)\nDeep learning: Neural networks for computer vision or complex prediction\n\n\n\n\n8.9.7 Resources for Continued Learning\nR Programming: - R for Data Science (2e) by Hadley Wickham & Garrett Grolemund - Advanced R by Hadley Wickham (when you’re ready to level up)\nStatistics: - Learning Statistics with R by Danielle Navarro - Statistical Rethinking by Richard McElreath (Bayesian focus)\nMachine Learning: - An Introduction to Statistical Learning (ISLR) - Free textbook with R code - Tidy Modeling with R by Max Kuhn & Julia Silge\nSQL: - SQL for Data Scientists - Mode SQL Tutorial (interactive)\nPython (if desired): - Python for Data Analysis by Wes McKinney - Python Data Science Handbook\nQuarto & Reproducibility: - Quarto Documentation - Happy Git with R by Jenny Bryan\nCommunities: - R for Data Science (R4DS) Online Learning Community - Slack community - RStudio Community - Forum for questions - Stack Overflow - Technical Q&A - Twitter/X #RStats hashtag - R community updates",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#summary",
    "href": "chapters/ch08-special_formats.html#summary",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.10 Summary",
    "text": "8.10 Summary\nCongratulations! You’ve completed Part 1 of this course. Let’s recap what you’ve accomplished:\n\n8.10.1 Skills You’ve Mastered\n\nData Import: CSV, Excel, SAS, SPSS, Stata files\nData Cleaning: Fixing names, handling missing data, removing duplicates\nData Transformation: dplyr verbs, grouped summaries, conditional logic\nData Reshaping: Wide to long, long to wide, separating and uniting columns\nData Joining: Combining multiple datasets with all join types\nString Manipulation: stringr functions and regular expressions\nDate/Time Handling: Parsing, extracting, arithmetic with lubridate\nData Visualization: Creating publication-quality plots with ggplot2\nFunctional Programming: Iteration with purrr::map() functions\nReproducible Reporting: Professional reports with Quarto\nBest Practices: Project organization, version control, code style\n\n\n\n8.10.2 The Journey Ahead\nYou’ve built a solid foundation in data science. These skills will serve you throughout your career, whether you pursue:\n\nGraduate research in animal science\nIndustry roles in livestock/agriculture\nData science positions in any field\nTeaching and extension work\n\nPart 2 (Statistics) will build directly on these skills. You’ll learn to: - Test hypotheses with confidence - Quantify uncertainty - Build predictive models - Make data-driven decisions\n\n\n8.10.3 A Note of Encouragement\nData science is a journey, not a destination. You won’t master everything immediately, and that’s okay. What matters is:\n\nYou know what’s possible\nYou can find help when stuck (documentation, communities, Google/Stack Overflow)\nYou understand reproducibility and best practices\nYou’re comfortable enough with R to keep learning\n\nKeep practicing! The more you use these skills on real projects, the more natural they’ll become.\n\n\n\n\n\n\nTipNext Steps\n\n\n\n\nComplete the capstone project below (this integrates everything!)\nReview any topics from Weeks 1-8 that feel unclear\nExplore the additional resources section\nGet ready for Part 2: Introduction to Statistics!",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#homework-final-part-1-capstone-project",
    "href": "chapters/ch08-special_formats.html#homework-final-part-1-capstone-project",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.11 Homework: Final Part 1 Capstone Project",
    "text": "8.11 Homework: Final Part 1 Capstone Project\n\n8.11.1 Overview\nThis is your opportunity to demonstrate everything you’ve learned in Part 1. You’ll work with messy, multi-source data from a realistic animal science scenario, clean it, analyze it, visualize it, and present your findings in a professional Quarto report.\nTotal Points: 100\n\n\n\n8.11.2 Scenario\nYou are a data analyst for a large cattle feedlot operation. Management wants to understand factors affecting cattle performance to optimize feeding strategies. You’ve been given data from three sources:\n\nAnimal records (SAS file): Birth dates, breeds, initial weights\nWeight measurements (messy Excel file): Monthly weight measurements with inconsistent formatting\nFeed treatments (CSV file): Which animals received which feed rations\n\nYour task is to integrate these datasets, clean them, analyze growth patterns, and report your findings.\n\n\n\n8.11.3 Part 1: Data Import and Initial Exploration (20 points)\nTasks:\n\nCreate a well-organized R Project with appropriate folder structure:\ncapstone_project/\n├── data/\n│   ├── raw/          # Original data files\n│   └── processed/    # Cleaned data\n├── code/\n│   └── analysis.qmd  # Your Quarto report\n├── output/\n│   └── figures/      # Generated plots\n└── README.md         # Project description\nImport all three datasets:\n\nanimal_records.sas7bdat (haven)\nweight_measurements.xlsx (readxl)\nfeed_treatments.csv (readr)\n\nUse glimpse(), summary(), and head() to explore each dataset\nDocument any initial observations about data quality issues\n\nDeliverable: R code showing import and initial exploration with commentary\nData files will be provided separately with: - 200 cattle - 6 monthly weight measurements per animal - 3 feed treatment groups - Intentional messiness: missing values, inconsistent column names, date formats, etc.\n\n\n\n8.11.4 Part 2: Data Cleaning (25 points)\nTasks:\n\nClean column names in the Excel file using janitor::clean_names()\nFix date formats using lubridate functions\nHandle missing values:\n\nIdentify which variables have NAs\nDecide on an appropriate strategy (remove, impute, or flag)\nDocument your decisions\n\nRemove duplicates if any exist (use janitor::get_dupes() to check)\nFix data types:\n\nEnsure weights are numeric\nEnsure breeds and treatments are factors with meaningful levels\nEnsure dates are Date class\n\nCreate derived variables:\n\nCalculate age (days) at each weight measurement\nCalculate weight gain between consecutive measurements\nCreate a birth season variable (Winter/Spring/Summer/Fall)\n\n\nDeliverable: Clean, well-structured datasets with code and explanations\n\n\n\n8.11.5 Part 3: Data Integration (15 points)\nTasks:\n\nJoin the three datasets into a single analysis-ready dataset\n\nChoose appropriate join types (likely left_join())\nEnsure you don’t lose data unintentionally\nCheck the dimensions before and after joining\n\nReshape data if needed:\n\nYou may need pivot_longer() or pivot_wider() depending on your analysis approach\n\nCreate a summary table showing:\n\nNumber of animals per treatment\nNumber of animals per breed\nNumber of measurements per animal\n\n\nDeliverable: A single tidy dataset ready for analysis and summary tables\n\n\n\n8.11.6 Part 4: Exploratory Data Analysis (20 points)\nTasks:\nCreate at least 5 visualizations addressing these questions:\n\nGrowth curves: How do cattle weights change over time?\n\nLine plot with time on x-axis, weight on y-axis\nColor by treatment or breed\n\nTreatment comparison: Do treatments affect final weights?\n\nBox plots or violin plots comparing treatments\n\nBreed differences: Are there breed differences in growth?\n\nFaceted plots or colored lines\n\nWeight gain distribution: What’s the distribution of daily gain?\n\nHistogram or density plot\n\nRelationships: Is initial weight related to final weight?\n\nScatter plot with trend line\n\n\nRequirements for each plot: - Appropriate geom choice - Clear axis labels and titles - Proper use of color/fill - Clean theme - Saved to output/figures/ with ggsave()\nDeliverable: Five publication-quality plots with interpretation\n\n\n\n8.11.7 Part 5: Summary Statistics (10 points)\nTasks:\n\nCalculate summary statistics by treatment:\n\nMean and SD of initial weight\nMean and SD of final weight\nMean and SD of total weight gain\nMean and SD of average daily gain\n\nCreate a nicely formatted table (use knitr::kable() or gt package)\nWrite 2-3 sentences interpreting the results:\n\nWhich treatment performed best?\nIs the difference substantial?\n\n\nDeliverable: Summary table and written interpretation\n\n\n\n8.11.8 Part 6: Professional Quarto Report (10 points)\nTasks:\nStructure your report with these sections:\n\nTitle and Author Information\nExecutive Summary (2-3 paragraphs summarizing goals, methods, key findings)\nIntroduction (background and objectives)\nMethods:\n\nData sources\nCleaning steps\nAnalysis approach\n\nResults:\n\nSummary statistics table\nFigures with captions\nWritten interpretation of each figure\n\nDiscussion:\n\nWhat do these results mean for feedlot management?\nLimitations of the analysis\nRecommendations for future work\n\nConclusion (1 paragraph)\nAppendix: Session info (sessionInfo())\n\nYAML header requirements:\n---\ntitle: \"Cattle Feedlot Performance Analysis\"\nauthor: \"Your Name\"\ndate: today\nformat:\n  html:\n    toc: true\n    toc-depth: 3\n    number-sections: true\n    code-fold: true\n    code-tools: true\n    embed-resources: true\n    theme: cosmo\nexecute:\n  warning: false\n  message: false\n---\nDeliverable: Fully rendered HTML report that tells a cohesive story\n\n\n\n8.11.9 Grading Rubric\n\n\n\n\n\n\n\n\nComponent\nPoints\nCriteria\n\n\n\n\nData Import\n20\nAll datasets imported correctly; initial exploration documented\n\n\nData Cleaning\n25\nThorough cleaning with appropriate techniques; well-documented decisions\n\n\nData Integration\n15\nDatasets joined correctly; appropriate reshaping; summary tables\n\n\nVisualizations\n20\n5+ plots addressing key questions; clear, publication-quality formatting\n\n\nSummary Statistics\n10\nCorrect calculations; well-formatted table; thoughtful interpretation\n\n\nReport Quality\n10\nProfessional structure; clear writing; reproducible; proper YAML\n\n\nTOTAL\n100\n\n\n\n\n\n\n\n8.11.10 Submission Instructions\nDue Date: [To be announced by instructor]\nSubmission:\n\nRender your Quarto document to HTML\nCompress your entire project folder (including data, code, output) into a ZIP file\nSubmit via the course learning management system (Canvas/Blackboard/etc.)\n\nChecklist before submitting: - [ ] All code runs from top to bottom without errors - [ ] Quarto document renders successfully to HTML - [ ] All required sections are present - [ ] Figures are saved in output/figures/ - [ ] README.md describes the project - [ ] File paths are relative (no hard-coded paths like /Users/yourname/) - [ ] Code is well-commented and easy to follow\n\n\n\n8.11.11 Tips for Success\n\nStart early! This is a substantial project.\nWork incrementally:\n\nImport → Clean → Join → Visualize → Report\nDon’t try to do everything at once\n\nTest your code frequently:\n\nRender your Quarto document often to catch errors early\n\nUse comments generously:\n\nExplain why you made decisions, not just what the code does\n\nMake it your own:\n\nFeel free to go beyond the minimum requirements\nAdditional analyses, creative visualizations, and deeper insights are encouraged!\n\nAsk for help if stuck:\n\nInstructor office hours\nR4DS Slack community\nStack Overflow (search first, then ask)\n\nProofread your writing:\n\nYour report should be polished and professional",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  },
  {
    "objectID": "chapters/ch08-special_formats.html#additional-resources",
    "href": "chapters/ch08-special_formats.html#additional-resources",
    "title": "8  Special Data Formats, Integration, and Course Wrap-up",
    "section": "8.12 Additional Resources",
    "text": "8.12 Additional Resources\n\n8.12.1 R Packages Documentation\nData Import: - haven - Read SAS, SPSS, Stata - readxl - Read Excel - writexl - Write Excel (simple) - openxlsx - Advanced Excel operations\nData Cleaning: - janitor - Data cleaning utilities - lubridate - Date/time manipulation - glue - String interpolation\nCore Tidyverse: - dplyr - Data manipulation - tidyr - Data reshaping - ggplot2 - Data visualization - readr - Read CSV files - stringr - String manipulation - purrr - Functional programming\n\n\n8.12.2 Cheat Sheets\n\nData Import Cheat Sheet\nData Transformation (dplyr) Cheat Sheet\nData Tidying (tidyr) Cheat Sheet\nData Visualization (ggplot2) Cheat Sheet\nDates and Times (lubridate) Cheat Sheet\nApply Functions (purrr) Cheat Sheet\n\n\n\n8.12.3 Books (Free Online)\nR Programming: - R for Data Science (2e) - Wickham & Grolemund (comprehensive reference) - Hands-On Programming with R - Grolemund (beginner-friendly) - Advanced R - Wickham (when you’re ready to level up)\nStatistics (Part 2 Preview): - Learning Statistics with R - Navarro (statistics fundamentals) - Introduction to Modern Statistics - OpenIntro (free textbook)\nQuarto: - Quarto Guide - Official documentation\nData Science Career: - Build a Career in Data Science - Robinson & Nolis\n\n\n8.12.4 Video Tutorials\n\nStatQuest with Josh Starmer - R and statistics (excellent explanations!)\nData Science Dojo - R tutorials\nRStudio Webinars - Advanced topics\n\n\n\n8.12.5 Online Courses\n\nDataCamp: Data Scientist with R Track (paid)\nCoursera: R Programming (Johns Hopkins)\nedX: Data Science: R Basics (Harvard)\n\n\n\n8.12.6 Communities\n\nR for Data Science Online Learning Community - Slack workspace, book club\nRStudio Community - Forum for questions\nStack Overflow [r] tag - Technical Q&A\n#RStats on Twitter/X - R community news and tips\n\n\n\n8.12.7 Blogs to Follow\n\nR-bloggers - Aggregator of R blogs\nSimply Statistics - Statistics and data science\nJulia Silge’s Blog - Tidy modeling and text analysis\nDavid Robinson’s Blog - Data analysis and visualization\n\n\nNext Chapter: Part 2, Chapter 1: Statistical Foundations\n\n\n\n\n\n\n\nNote🎉 Congratulations on Completing Part 1!\n\n\n\nYou’ve learned an incredible amount in 8 weeks. Take a moment to be proud of what you’ve accomplished. You now have the skills to:\n\nImport data from any source\nClean and transform messy real-world data\nCreate publication-quality visualizations\nJoin and reshape complex datasets\nProduce reproducible reports\n\nThese skills will serve you throughout your career. Well done, and see you in Part 2!",
    "crumbs": [
      "Part 1: Introduction to Data Science",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Special Data Formats, Integration, and Course Wrap-up</span>"
    ]
  }
]